!function(t){"use strict";function e(){this.$dom=t(document),this.$html=this.$dom.find("html"),this.isOldie=!!this.$html.hasClass("oldie"),this.click="click",this.onReady=this.onOldie=this.onTouch=!1,this.autoInit="false"===t("script[gumby-init]").attr("gumby-init")?!1:!0,this.debugMode=Boolean(t("script[gumby-debug]").length),this.touchDevice=!!(Modernizr.touch||window.navigator.userAgent.indexOf("Windows Phone")>0),this.gumbyTouch=!1,this.touchEvents="js/libs",this.breakpoint=Number(t("script[gumby-breakpoint]").attr("gumby-breakpoint"))||768,this.touchEventsLoaded=!1,this.uiModulesReady=!1,this.uiModules={},this.inits={};var e=t("script[gumby-touch]").attr("gumby-touch"),n=t("script[gumby-path]").attr("gumby-path");"false"===e?this.touchEvents=!1:e?this.touchEvents=e:n&&(this.touchEvents=n),this.touchDevice&&(this.click+=" tap"),this.touchDevice&&t(window).width()<this.breakpoint?(this.$html.addClass("gumby-touch"),this.gumbyTouch=!0):this.$html.addClass("gumby-no-touch"),this.debugMode&&this.debug("Gumby is in debug mode")}e.prototype.init=function(t){var e=this,n=t?t:{};return this.$dom.ready(function(){n.debug&&(e.debugMode=!0),e.debug("Initializing Gumby");var t=n.uiModules?n.uiModules:!1;e.initUIModules(t),e.onReady&&e.onReady(),e.isOldie&&e.onOldie&&e.onOldie(),Modernizr.touch&&e.onTouch&&e.onTouch()}),this},e.prototype.helpers=function(){this.onReady&&this.onReady(),this.isOldie&&this.onOldie&&this.onOldie(),Modernizr.touch&&this.onTouch&&this.onTouch()},e.prototype.ready=function(t){return t&&"function"==typeof t&&(this.onReady=t),this},e.prototype.oldie=function(t){return t&&"function"==typeof t&&(this.onOldie=t),this},e.prototype.touch=function(t){return t&&"function"==typeof t&&(this.onTouch=t),this},e.prototype.console=function(t,e){this.debugMode&&window.console&&console[console[t]?t:"log"](e.length>1?Array.prototype.slice.call(e):e[0])},e.prototype.log=function(){this.console("log",arguments)},e.prototype.debug=function(){this.console("debug",arguments)},e.prototype.warn=function(){this.console("warn",arguments)},e.prototype.error=function(){this.console("error",arguments)},e.prototype.dump=function(){return{$dom:this.$dom,isOldie:this.isOldie,touchEvents:this.touchEvents,debugMode:this.debugMode,autoInit:this.autoInit,uiModules:this.uiModules,click:this.click}},e.prototype.selectAttr=function(){for(var t=0;t<arguments.length;t++){var e=arguments[t],n="data-"+arguments[t],i="gumby-"+arguments[t];if(this.is("["+n+"]"))return this.attr(n)?this.attr(n):!0;if(this.is("["+i+"]"))return this.attr(i)?this.attr(i):!0;if(this.is("["+e+"]"))return this.attr(e)?this.attr(e):!0}return!1},e.prototype.addInitalisation=function(t,e){this.inits[t]=e},e.prototype.initialize=function(t,e){if("object"==typeof t){var n=0;for(n;n<t.length;n++)this.inits[t[n]]&&"function"==typeof this.inits[t[n]]?this.inits[t[n]](e):this.error("Error initializing module: "+t[n])}else this.inits[t]&&"function"==typeof this.inits[t]?this.inits[t](e):this.error("Error initializing module: "+t);return this},e.prototype.UIModule=function(t){var e=t.module;this.uiModules[e]=t},e.prototype.initUIModules=function(t){var e,n,i=this.uiModules;t&&(i=t);for(e in i)n=t?i[e]:e,this.uiModules[n].init()},window.Gumby=new e}(jQuery),!function(t){"use strict";function e(e){Gumby.debug("Initializing Fixed Position",e),this.$el=e,this.$window=t(window),this.fixedPoint="",this.pinPoint=!1,this.fixedPointjQ=!1,this.pinPointjQ=!1,this.offset=0,this.pinOffset=0,this.top=0,this.constrainEl=!0,this.state=!1,this.measurements={left:0,width:0},this.setup();var n=this;this.$window.on("scroll load",function(){n.monitorScroll()}),this.$el.on("gumby.initialize",function(){Gumby.debug("Re-initializing Fixed Position",e),n.setup(),n.monitorScroll()})}e.prototype.setup=function(){var t=this;this.fixedPoint=this.parseAttrValue(Gumby.selectAttr.apply(this.$el,["fixed"])),this.pinPoint=Gumby.selectAttr.apply(this.$el,["pin"])||!1,this.offset=Number(Gumby.selectAttr.apply(this.$el,["offset"]))||0,this.pinOffset=Number(Gumby.selectAttr.apply(this.$el,["pinoffset"]))||0,this.top=Number(Gumby.selectAttr.apply(this.$el,["top"]))||0,this.constrainEl=Gumby.selectAttr.apply(this.$el,["constrain"])||!0,"false"===this.constrainEl&&(this.constrainEl=!1),this.$parent=this.$el.parents(".columns, .column, .row"),this.$parent=this.$parent.length?this.$parent.first():!1,this.parentRow=this.$parent?!!this.$parent.hasClass("row"):!1,this.pinPoint&&(this.pinPoint=this.parseAttrValue(this.pinPoint)),this.fixedPointjQ=this.fixedPoint instanceof jQuery,this.pinPointjQ=this.pinPoint instanceof jQuery,this.$parent&&this.constrainEl&&(this.measure(),this.$window.resize(function(){t.state&&(t.measure(),t.constrain())}))},e.prototype.monitorScroll=function(){var t=this.$window.scrollTop(),e=this.fixedPointjQ?this.fixedPoint.offset().top:this.fixedPoint,n=!1;this.pinPoint&&(n=this.pinPointjQ?this.pinPoint.offset().top:this.pinPoint),this.offset&&(e-=this.offset),this.pinOffset&&(n-=this.pinOffset),t>=e&&"fixed"!==this.state?(!n||n>t)&&this.fix():e>t&&"fixed"===this.state?this.unfix():n&&t>=n&&"pinned"!==this.state&&this.pin()},e.prototype.fix=function(){Gumby.debug("Element has been fixed",this.$el),Gumby.debug("Triggering onFixed event",this.$el),this.state="fixed",this.$el.css({top:this.top}).addClass("fixed").removeClass("unfixed pinned").trigger("gumby.onFixed"),this.$parent&&this.constrain()},e.prototype.unfix=function(){Gumby.debug("Element has been unfixed",this.$el),Gumby.debug("Triggering onUnfixed event",this.$el),this.state="unfixed",this.$el.addClass("unfixed").removeClass("fixed pinned").trigger("gumby.onUnfixed")},e.prototype.pin=function(){Gumby.debug("Element has been pinned",this.$el),Gumby.debug("Triggering onPinned event",this.$el),this.state="pinned",this.$el.css({top:this.$el.offset().top}).addClass("pinned fixed").removeClass("unfixed").trigger("gumby.onPinned")},e.prototype.constrain=function(){Gumby.debug("Constraining element",this.$el),this.$el.css({left:this.measurements.left,width:this.measurements.width})},e.prototype.measure=function(){var t;this.measurements.left=this.$parent.offset().left,this.measurements.width=this.$parent.width(),this.parentRow&&(t=Number(this.$parent.css("paddingLeft").replace(/px/,"")),t&&(this.measurements.left+=t))},e.prototype.parseAttrValue=function(e){if(t.isNumeric(e))return Number(e);if("top"===e)return this.$el.offset().top;var n=t(e);return n.length?n:(Gumby.error("Cannot find Fixed target: "+e),!1)},Gumby.addInitalisation("fixed",function(n){t("[data-fixed],[gumby-fixed],[fixed]").each(function(){var i=t(this);return i.data("isFixed")&&!n?!0:i.data("isFixed")&&n?(i.trigger("gumby.initialize"),!0):(i.data("isFixed",!0),new e(i),void 0)})}),Gumby.UIModule({module:"fixed",events:["initialize","onFixed","onUnfixed"],init:function(){Gumby.initialize("fixed")}})}(jQuery),!function(t){"use strict";function e(t){Gumby.debug("Initializing Navbar",t),this.$el=t,this.$dropDowns=this.$el.find("li:has(.dropdown)");var e=this,n=this.$el.attr("gumby-persist");"undefined"==typeof n&&"false"!==n&&this.$el.find("li:not(:has(.dropdown)) a").on(Gumby.click,function(){e.$el.find("ul").removeClass("active")}),this.$dropDowns.on(Gumby.click,this.toggleDropdown).on("swiperight",this.openLink),"#"!==this.$dropDowns.children("a").attr("href")&&this.$dropDowns.children("a").append('<i class="icon-popup"></i>').children("i").on(Gumby.click,this.openLink),this.$el.find("li:not(:has(.dropdown)) a[href]").on(Gumby.click,this.openLink)}Gumby.gumbyTouch&&(e.prototype.toggleDropdown=function(e){if(e.preventDefault(),t(this).parents(".dropdown")&&e.stopImmediatePropagation(),!t(e.target).is("i")){var n=t(this);n.hasClass("active")?n.removeClass("active"):n.addClass("active")}},e.prototype.openLink=function(e){e.preventDefault();var n,i=t(this),r=i;i.is("i")?r=i.parent("a"):i.is("li")&&(r=i.children("a")),n=r.attr("href"),"blank"==r.attr("target")?window.open(n):window.location=n},Gumby.addInitalisation("navbar",function(){t(".navbar").each(function(){var n=t(this);return n.data("isNavbar")?!0:(n.data("isNavbar",!0),new e(n),void 0)})}),Gumby.UIModule({module:"navbar",events:[],init:function(){Gumby.initialize("navbar")}}))}(jQuery),!function(t){"use strict";function e(e){Gumby.debug("Initializing Retina",e),this.$el=e,this.imageSrc=this.$el.attr("src"),this.retinaSrc=this.fetchRetinaImage(),this.$retinaImg=t(new Image);var n=this;return this.retinaSrc?(this.$retinaImg.attr("src",this.retinaSrc).load(function(){n.retinaImageLoaded()}).error(function(){Gumby.error("Couln't load retina image: "+n.retinaSrc)}),void 0):!1}e.prototype.fetchRetinaImage=function(){var t=this.imageSrc,e=this.imageSrc.search(/(\.|\/)(gif|jpe?g|png)$/i);return 0>e?!1:t.substr(0,e)+"@2x"+t.substr(e,t.length)},e.prototype.retinaImageLoaded=function(){Gumby.debug("Swapping image for retina version",this.$el),Gumby.debug("Triggering onRetina event",this.$el),this.$el.attr("src",this.$retinaImg.attr("src")).trigger("gumby.onRetina")},Gumby.addInitalisation("retina",function(){!window.devicePixelRatio||window.devicePixelRatio<=1||t("img[data-retina],img[gumby-retina],img[retina]").each(function(){var n=t(this);return n.data("isRetina")?!0:(n.data("isRetina",!0),new e(n),void 0)})}),Gumby.UIModule({module:"retina",events:["onRetina"],init:function(){Gumby.initialize("retina")}})}(jQuery),!function(t){"use strict";function e(t){Gumby.debug("Initializing Skiplink",t),this.$el=t,this.targetPos=0,this.duration=0,this.offset=!1,this.easing="",this.update=!1,this.setup();var e=this;this.$el.on(Gumby.click+" gumby.skip",function(t){t.preventDefault(),"skip"===t.namespace&&Gumby.debug("Skip event triggered",e.$el),e.update?e.calculateTarget(e.skipTo):e.skipTo()}).on("gumby.initialize",function(){Gumby.debug("Re-initializing Skiplink",e.$el),e.setup()})}e.prototype.setup=function(){this.duration=Number(Gumby.selectAttr.apply(this.$el,["duration"]))||200,this.offset=Gumby.selectAttr.apply(this.$el,["offset"])||!1,this.easing=Gumby.selectAttr.apply(this.$el,["easing"])||"swing",this.update=Gumby.selectAttr.apply(this.$el,["update"])?!0:!1,this.calculateTarget()},e.prototype.calculateTarget=function(e){var n,i=Gumby.selectAttr.apply(this.$el,["goto"]);if("top"==i)this.targetPos=0;else if(t.isNumeric(i))this.targetPos=Number(i);else{if(n=t(i),!n.length)return Gumby.error("Cannot find skiplink target: "+i),!1;this.targetPos=n.offset().top}e&&e.apply(this)},e.prototype.skipTo=function(){Gumby.debug("Skipping to target",this.$el);var e=this;t("html,body").animate({scrollTop:this.calculateOffset()},this.duration,this.easing).promise().done(function(){Gumby.debug("Triggering onComplete event",e.$el),e.$el.trigger("gumby.onComplete")})},e.prototype.calculateOffset=function(){if(!this.offset)return this.targetPos;var t=this.offset.substr(0,1),e=Number(this.offset.substr(1,this.offset.length));return"-"===t?this.targetPos-e:"+"===t?this.targetPos+e:void 0},Gumby.addInitalisation("skiplink",function(n){t(".skiplink > a, .skip").each(function(){var i=t(this);return i.data("isSkipLink")&&!n?!0:i.data("isSkipLink")&&n?(i.trigger("gumby.initialize"),!0):(i.data("isSkipLink",!0),new e(i),void 0)})}),Gumby.UIModule({module:"skiplink",events:["initialize","onComplete","skip"],init:function(){Gumby.initialize("skiplink")}})}(jQuery),!function(t){"use strict";function e(e){this.$el=t(e),this.targets=[],this.on="",this.className="",this.self=!1,this.$el.length&&(Gumby.debug("Initializing Toggle",e),this.init())}function n(e){this.$el=t(e),this.targets=[],this.on="",this.className="",this.self=!1,this.$el.length&&(Gumby.debug("Initializing Switch",e),this.init())}e.prototype.init=function(){var t=this;this.setup(),this.$el.on(this.on,function(e){e.preventDefault(),t.trigger(t.triggered)}).on("gumby.trigger",function(){Gumby.debug("Trigger event triggered",t.$el),t.trigger(t.triggered)}).on("gumby.initialize",function(){Gumby.debug("Re-initializing "+t.constructor,$el),t.setup()})},e.prototype.setup=function(){this.targets=this.parseTargets(),this.on=Gumby.selectAttr.apply(this.$el,["on"])||Gumby.click,this.className=Gumby.selectAttr.apply(this.$el,["classname"])||"active",this.self="false"===Gumby.selectAttr.apply(this.$el,["self"])},e.prototype.parseTargets=function(){var e=Gumby.selectAttr.apply(this.$el,["trigger"]),n=0,i=[];return e?(n=e.indexOf("|"),-1===n?this.checkTargets([e])?[t(e)]:!1:(i=e.split("|"),this.checkTargets(i)?i.length>1?[t(i[0]),t(i[1])]:[t(i[0])]:!1)):!1},e.prototype.checkTargets=function(e){var n=0;for(n;n<e.length;n++)if(e[n]&&!t(e[n]).length)return Gumby.error("Cannot find "+this.constructor.name+" target: "+e[n]),!1;return!0},e.prototype.triggered=function(){Gumby.debug("Triggering onTrigger event",this.$el),this.$el.trigger("gumby.onTrigger",[this.$el.hasClass(this.className)])},n.prototype=new e,n.prototype.constructor=n,e.prototype.trigger=function(t){Gumby.debug("Triggering Toggle",this.$el);var e;this.targets?1==this.targets.length?this.$el.add(this.targets[0]).toggleClass(this.className):this.targets.length>1&&(this.targets[0].hasClass(this.className)?(e=this.targets[0],this.self||(e=e.add(this.$el)),e.removeClass(this.className),this.targets[1].addClass(this.className)):(e=this.targets[0],this.self||(e=e.add(this.$el)),e.addClass(this.className),this.targets[1].removeClass(this.className))):this.$el.toggleClass(this.className),t&&"function"==typeof t&&t.apply(this)},n.prototype.trigger=function(t){Gumby.debug("Triggering Switch",this.$el);var e;this.targets?1==this.targets.length?(e=this.targets[0],this.self||(e=e.add(this.$el)),e.addClass(this.className)):this.targets.length>1&&(e=this.targets[0],this.self||(e=e.add(this.$el)),e.addClass(this.className),this.targets[1].removeClass(this.className)):this.$el.addClass(this.className),t&&"function"==typeof t&&t.apply(this)},Gumby.addInitalisation("toggles",function(n){t(".toggle").each(function(){var i=t(this);return i.data("isToggle")&&!n?!0:(i.data("isToggle")&&n&&i.trigger("gumby.initialize"),i.data("isToggle",!0),new e(i),void 0)})}),Gumby.addInitalisation("switches",function(e){t(".switch").each(function(){var i=t(this);return i.data("isSwitch")&&!e?!0:i.data("isSwitch")&&e?(i.trigger("gumby.initialize"),!0):(i.data("isSwitch",!0),new n(i),void 0)})}),Gumby.UIModule({module:"toggleswitch",events:["initialize","trigger","onTrigger"],init:function(){Gumby.initialize("switches"),Gumby.initialize("toggles")}})}(jQuery),!function(){"use strict";function t(t){Gumby.debug("Initializing Parallax",t),this.$el=t,this.$holder={},this.ratio=this.offset=0;var e=this;this.setup(),this.$el.on("gumby.initialize",function(){Gumby.debug("Re-initializing Parallax",e.$el),e.setup()}),this.setPosition(),this.$holder.scroll(function(){e.scroll()}),this.scroll()}Gumby.gumbyTouch||(t.prototype.setup=function(){this.$holder=Gumby.selectAttr.apply(this.$el,["holder"]),this.ratio=Number(Gumby.selectAttr.apply(this.$el,["parallax"]))||1,this.offset=Number(Gumby.selectAttr.apply(this.$el,["offset"]))||0,this.xPos=this.$el.css("backgroundPosition").split(" ")[0],this.xPos&&"0%"!==this.xPos||(this.xPos="50%"),this.startPos=(this.$el.offset().top-this.offset)*this.ratio,this.$holder&&(this.$holder=$(this.$holder)),this.$holder&&this.$holder.length?this.startPos-=this.$holder.offset().top:this.$holder=$(window)},t.prototype.scroll=function(){this.setPosition(this.startPos-this.$holder.scrollTop()*this.ratio)},t.prototype.setPosition=function(t){this.$el.css("backgroundPosition",this.xPos+" "+t+"px")},Gumby.addInitalisation("parallax",function(){$(".parallax").each(function(){var e=$(this);return e.data("isParallax")?!0:(e.data("isParallax",!0),new t(e),void 0)})}),Gumby.UIModule({module:"parallax",events:[],init:function(){Gumby.initialize("parallax")}}))}(),!function(t){"use strict";function e(t){Gumby.debug("Initializing InViewWatcher",t),this.$el=t;var e=this;this.setup(),this.$el.on("gumby.initialize",function(){Gumby.debug("Re-initializing InViewWatcher",e.$el),e.setup()})}e.prototype.setup=function(){Gumby.debug("Setting up instance of InViewWatcher",this.$el),this.targets=this.parseTargets();var t=Gumby.selectAttr.apply(this.$el,["classname"]);t?t.indexOf("|")>-1?(t=t.split("|"),this.classname=t[0],this.classnameBottom=t[1]||"",this.classnameTop=t[2]||t[1]||""):(this.classname=t,this.classnameBottom="",this.classnameTop=""):(this.classname="active",this.classnameBottom="",this.classnameTop="");var e=Gumby.selectAttr.apply(this.$el,["offset"]);e=0!=e?e.split("|"):0,this.offset=e[0]||0,this.offsetTop=e[1]||e[0]||0,this.offsetBottom=this.offset},e.prototype.parseTargets=function(){var e=Gumby.selectAttr.apply(this.$el,["target"]);if(!e)return!1;var n=e.split("|");return 1===n.length?t(n[0]):t(n.join(", "))};var n,i,r,s,o,a,u,l,h=t(window).height(),c=[];t(window).on("scroll",function(){for(n=t(this).scrollTop(),i=0;i<c.length&&(r=c[i],s=r.targets||r.$el,"none"!=r.$el.css("display"));i++){o=r.$el.offset().top,a=r.$el.height(),u=r.offsetTop,l=r.offsetBottom;var e=o>n-l+h,f=n>o+a-u;f||e?f&&!e?(s.hasClass(r.classname)&&s.removeClass(r.classname),s.hasClass(r.classnameBottom)&&s.removeClass(r.classnameBottom),s.hasClass(r.classnameTop)||(s.addClass(r.classnameTop),s.trigger("gumby.offtop"))):e&&!f&&(s.hasClass(r.classname)&&s.removeClass(r.classname),s.hasClass(r.classnameTop)&&s.removeClass(r.classnameTop),s.hasClass(r.classnameBottom)||(s.addClass(r.classnameBottom),s.trigger("gumby.offbottom"))):(s.hasClass(r.classnameTop)&&s.removeClass(r.classnameTop),s.hasClass(r.classnameBottom)&&s.removeClass(r.classnameBottom),s.hasClass(r.classname)||(s.addClass(r.classname),s.trigger("gumby.inview")))}}),t(window).on("resize",function(){h=t(this).height(),t(window).trigger("scroll")}),Gumby.addInitalisation("inview",function(n){t(".inview").each(function(){var i=t(this);return i.data("isInView")&&!n?!0:(i.data("isInView")&&n&&i.trigger("gumby.initialize"),i.data("isInView",!0),c.push(new e(i)),void 0)}),t(window).trigger("scroll")}),Gumby.UIModule({module:"inview",events:["initialize","trigger","onTrigger"],init:function(){Gumby.initialize("inview")}})}(jQuery),!function(){"use strict";function t(t){Gumby.debug("Initializing Responsive Images module",t),this.$el=t,this.type="",this.supports="",this.media="",this.def="",this.current="",this.setup();var e=this;$(window).on("load gumby.trigger "+(!this.media||"resize"),function(){e.fire()}),this.$el.on("gumby.initialize",function(){Gumby.debug("Re-initializing Responsive Images module",e.$el),e.setup(),e.fire()}),e.fire()}t.prototype.setup=function(){this.type=this.$el.is("img")?"img":"bg",this.supports=Gumby.selectAttr.apply(this.$el,["supports"])||!1,this.media=Gumby.selectAttr.apply(this.$el,["media"])||!1,this.def=Gumby.selectAttr.apply(this.$el,["default"])||!1,this.supports&&(this.supports=this.parseAttr(this.supports)),this.media&&(this.media=this.parseAttr(this.media)),this.checks={supports:function(t){return Modernizr[t]},media:function(t){return window.matchMedia(t).matches}}},t.prototype.fire=function(){var t=!1;return this.supports&&Modernizr&&(t=this.handleTests("supports",this.supports)),this.media&&window.matchMedia&&!t&&(t=this.handleTests("media",this.media)),!t&&this.def&&(t=this.def),t?(this.current!==t&&(this.current=t,this.insertImage(this.type,t)),void 0):!1},t.prototype.handleTests=function(t,e){var n=this,i=!1;return $(e).each(function(e,r){return n.check(t,r.test)?(i=r.img,!1):void 0}),i},t.prototype.check=function(t,e){return this.checks[t](e)},t.prototype.insertImage=function(t,e){var n=this,i=$(new Image);i.load(function(){"img"===t?n.$el.attr("src",e):n.$el.css("background-image","url("+e+")"),Gumby.debug("Triggering onChange event",e,n.$el),n.$el.trigger("gumby.onChange",[e])}).attr("src",e)},t.prototype.parseAttr=function(t){var e=this,n=t.split(","),i=[],r=[];return $(n).each(function(t,n){return r=n.split("|"),2!==r.length?!0:(i.push({test:e.shorthand(r[0]),img:r[1]}),void 0)}),i},t.prototype.shorthand=function(t){return(t.indexOf(">")>-1||t.indexOf("<")>-1)&&(t=t.replace(">","min-width: ").replace("<","max-width: ")),t.indexOf("width")>-1&&"("!==t.charAt(0)&&")"!==t.charAt(t.length-1)&&(t="("+t+")"),t},Gumby.addInitalisation("images",function(e){$("[gumby-supports],[data-supports],[supports],[gumby-media],[data-media],[media]").each(function(){var n=$(this);return n.data("isImage")&&!e?!0:n.data("isImage")&&e?(n.trigger("gumby.initialize"),!0):(n.data("isImage",!0),new t(n),void 0)})}),Gumby.UIModule({module:"images",events:["onChange","trigger"],init:function(){Gumby.initialize("images")}})}(),!function(){"use strict";function t(t){Gumby.debug("Initializing Shuffle",t),this.$el=t,this.$children=[],this.children=[],this.shuffles=[],this.def="",this.current="";var e=this;this.setup(),$(window).on("load resize",function(){e.handleTests()}),this.$el.on("gumby.shuffle",function(){Gumby.debug("Shuffle event triggered",e.$el),e.handleTests()}).on("gumby.initialize",function(){Gumby.debug("Re-initializing shuffle module",e.$el),e.setup()}),e.handleTests()}t.prototype.setup=function(){this.$children=this.$el.children(Gumby.selectAttr.apply(this.$el,["children"])),this.children=$.makeArray(this.$children),this.shuffles=this.parseAttrValue(Gumby.selectAttr.apply(this.$el,["shuffle"])),this.def=this.defaultSequence(this.$children.length),this.current="default"},t.prototype.handleTests=function(){var t=this,e=!1;window.matchMedia&&$(this.shuffles).each(function(n,i){return window.matchMedia(i.test).matches?(t.current!==i.test&&(t.current=i.test,t.shuffle(i.sequence)),e=!0,!1):void 0}),e||"default"===this.current||(this.current="default",t.shuffle(this.def))},t.prototype.shuffle=function(t){var e=this,n=[],i=[];t?(n=t.split("-"),$(n).each(function(t){i.push($(e.children[Number(n[t])]))})):i=this.children,this.$children.remove(),$(i).each(function(){e.$el.append($(this))}),Gumby.debug("Children shuffled",i,e.$el),Gumby.debug("Triggering onShuffle event",this.$el),this.$el.trigger("gumby.onShuffle",[$(i)])},t.prototype.defaultSequence=function(t){var e="",n=0;for(n;t>n;n++)e+=n+"-";return e.substr(0,e.length-1)},t.prototype.parseAttrValue=function(t){var e=this,n=t.split(","),i=[],r=[];return $(n).each(function(t,n){return r=n.split("|"),2!==r.length?!0:(i.push({test:e.shorthand(r[0]),sequence:r[1]}),void 0)}),i},t.prototype.shorthand=function(t){return(t.indexOf(">")>-1||t.indexOf("<")>-1)&&(t=t.replace(">","min-width: ").replace("<","max-width: ")),"("!==t.charAt(0)&&")"!==t.charAt(t.length-1)&&(t="("+t+")"),t},Gumby.addInitalisation("shuffle",function(e){$("[data-shuffle],[gumby-shuffle],[shuffle]").each(function(){var n=$(this);return n.data("isShuffle")&&!e?!0:n.data("isShuffle")&&e?(n.trigger("gumby.initialize"),!0):(n.data("isShuffle",!0),new t(n),void 0)})}),Gumby.UIModule({module:"shuffle",events:["onShuffle","shuffle"],init:function(){Gumby.initialize("shuffle")}})}(),function(t){var e,n,i="0.4.2",r="hasOwnProperty",s=/[\.\/]/,o=/\s*,\s*/,a="*",u=function(t,e){return t-e},l={n:{}},h=function(){for(var t=0,e=this.length;e>t;t++)if("undefined"!=typeof this[t])return this[t]},c=function(){for(var t=this.length;--t;)if("undefined"!=typeof this[t])return this[t]},f=function(t,i){t=String(t);var r,s=n,o=Array.prototype.slice.call(arguments,2),a=f.listeners(t),l=0,d=[],p={},g=[],m=e;g.firstDefined=h,g.lastDefined=c,e=t,n=0;for(var y=0,v=a.length;v>y;y++)"zIndex"in a[y]&&(d.push(a[y].zIndex),a[y].zIndex<0&&(p[a[y].zIndex]=a[y]));for(d.sort(u);d[l]<0;)if(r=p[d[l++]],g.push(r.apply(i,o)),n)return n=s,g;for(y=0;v>y;y++)if(r=a[y],"zIndex"in r)if(r.zIndex==d[l]){if(g.push(r.apply(i,o)),n)break;do if(l++,r=p[d[l]],r&&g.push(r.apply(i,o)),n)break;while(r)}else p[r.zIndex]=r;else if(g.push(r.apply(i,o)),n)break;return n=s,e=m,g};f._events=l,f.listeners=function(t){var e,n,i,r,o,u,h,c,f=t.split(s),d=l,p=[d],g=[];for(r=0,o=f.length;o>r;r++){for(c=[],u=0,h=p.length;h>u;u++)for(d=p[u].n,n=[d[f[r]],d[a]],i=2;i--;)e=n[i],e&&(c.push(e),g=g.concat(e.f||[]));p=c}return g},f.on=function(t,e){if(t=String(t),"function"!=typeof e)return function(){};for(var n=t.split(o),i=0,r=n.length;r>i;i++)!function(t){for(var n,i=t.split(s),r=l,o=0,a=i.length;a>o;o++)r=r.n,r=r.hasOwnProperty(i[o])&&r[i[o]]||(r[i[o]]={n:{}});for(r.f=r.f||[],o=0,a=r.f.length;a>o;o++)if(r.f[o]==e){n=!0;break}!n&&r.f.push(e)}(n[i]);return function(t){+t==+t&&(e.zIndex=+t)}},f.f=function(t){var e=[].slice.call(arguments,1);return function(){f.apply(null,[t,null].concat(e).concat([].slice.call(arguments,0)))}},f.stop=function(){n=1},f.nt=function(t){return t?new RegExp("(?:\\.|\\/|^)"+t+"(?:\\.|\\/|$)").test(e):e},f.nts=function(){return e.split(s)},f.off=f.unbind=function(t,e){if(!t)return f._events=l={n:{}},void 0;var n=t.split(o);if(n.length>1)for(var i=0,u=n.length;u>i;i++)f.off(n[i],e);else{n=t.split(s);var h,c,d,i,u,p,g,m=[l];for(i=0,u=n.length;u>i;i++)for(p=0;p<m.length;p+=d.length-2){if(d=[p,1],h=m[p].n,n[i]!=a)h[n[i]]&&d.push(h[n[i]]);else for(c in h)h[r](c)&&d.push(h[c]);m.splice.apply(m,d)}for(i=0,u=m.length;u>i;i++)for(h=m[i];h.n;){if(e){if(h.f){for(p=0,g=h.f.length;g>p;p++)if(h.f[p]==e){h.f.splice(p,1);break}!h.f.length&&delete h.f}for(c in h.n)if(h.n[r](c)&&h.n[c].f){var y=h.n[c].f;for(p=0,g=y.length;g>p;p++)if(y[p]==e){y.splice(p,1);break}!y.length&&delete h.n[c].f}}else{delete h.f;for(c in h.n)h.n[r](c)&&h.n[c].f&&delete h.n[c].f}h=h.n}}},f.once=function(t,e){var n=function(){return f.unbind(t,n),e.apply(this,arguments)};return f.on(t,n)},f.version=i,f.toString=function(){return"You are running Eve "+i},"undefined"!=typeof module&&module.exports?module.exports=f:"function"==typeof define&&define.amd?define("eve",[],function(){return f}):t.eve=f}(this),function(t,e){"function"==typeof define&&define.amd?define(["eve"],function(n){return e(t,n)}):e(t,t.eve)}(this,function(t,e){var n=function(e){var n={},i=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(t){setTimeout(t,16)},r=Array.isArray||function(t){return t instanceof Array||"[object Array]"==Object.prototype.toString.call(t)},s=0,o="M"+(+new Date).toString(36),a=function(){return o+(s++).toString(36)},u=Date.now||function(){return+new Date},l=function(t){var e=this;if(null==t)return e.s;var n=e.s-t;e.b+=e.dur*n,e.B+=e.dur*n,e.s=t},h=function(t){var e=this;return null==t?e.spd:(e.spd=t,void 0)},c=function(t){var e=this;return null==t?e.dur:(e.s=e.s*t/e.dur,e.dur=t,void 0)},f=function(){var t=this;delete n[t.id],t.update(),e("mina.stop."+t.id,t)},d=function(){var t=this;t.pdif||(delete n[t.id],t.update(),t.pdif=t.get()-t.b)},p=function(){var t=this;t.pdif&&(t.b=t.get()-t.pdif,delete t.pdif,n[t.id]=t)},g=function(){var t,e=this;if(r(e.start)){t=[];for(var n=0,i=e.start.length;i>n;n++)t[n]=+e.start[n]+(e.end[n]-e.start[n])*e.easing(e.s)}else t=+e.start+(e.end-e.start)*e.easing(e.s);e.set(t)},m=function(){var t=0;for(var r in n)if(n.hasOwnProperty(r)){var s=n[r],o=s.get();t++,s.s=(o-s.b)/(s.dur/s.spd),s.s>=1&&(delete n[r],s.s=1,t--,function(t){setTimeout(function(){e("mina.finish."+t.id,t)})}(s)),s.update()}t&&i(m)},y=function(t,e,r,s,o,u,v){var b={id:a(),start:t,end:e,b:r,s:0,dur:s-r,spd:1,get:o,set:u,easing:v||y.linear,status:l,speed:h,duration:c,stop:f,pause:d,resume:p,update:g};n[b.id]=b;var x,w=0;for(x in n)if(n.hasOwnProperty(x)&&(w++,2==w))break;return 1==w&&i(m),b};return y.time=u,y.getById=function(t){return n[t]||null},y.linear=function(t){return t},y.easeout=function(t){return Math.pow(t,1.7)},y.easein=function(t){return Math.pow(t,.48)},y.easeinout=function(t){if(1==t)return 1;if(0==t)return 0;var e=.48-t/1.04,n=Math.sqrt(.1734+e*e),i=n-e,r=Math.pow(Math.abs(i),1/3)*(0>i?-1:1),s=-n-e,o=Math.pow(Math.abs(s),1/3)*(0>s?-1:1),a=r+o+.5;return 3*(1-a)*a*a+a*a*a},y.backin=function(t){if(1==t)return 1;var e=1.70158;return t*t*((e+1)*t-e)},y.backout=function(t){if(0==t)return 0;t-=1;var e=1.70158;return t*t*((e+1)*t+e)+1},y.elastic=function(t){return t==!!t?t:Math.pow(2,-10*t)*Math.sin((t-.075)*2*Math.PI/.3)+1},y.bounce=function(t){var e,n=7.5625,i=2.75;return 1/i>t?e=n*t*t:2/i>t?(t-=1.5/i,e=n*t*t+.75):2.5/i>t?(t-=2.25/i,e=n*t*t+.9375):(t-=2.625/i,e=n*t*t+.984375),e},t.mina=y,y}("undefined"==typeof e?function(){}:e),i=function(){function i(t,e){if(t){if(t.tagName)return k(t);if(s(t,"array")&&i.set)return i.set.apply(i,t);if(t instanceof x)return t;if(null==e)return t=S.doc.querySelector(t),k(t)}return t=null==t?"100%":t,e=null==e?"100%":e,new $(t,e)}function r(t,e){if(e){if("#text"==t&&(t=S.doc.createTextNode(e.text||"")),"string"==typeof t&&(t=r(t)),"string"==typeof e)return"xlink:"==e.substring(0,6)?t.getAttributeNS(H,e.substring(6)):"xml:"==e.substring(0,4)?t.getAttributeNS(Y,e.substring(4)):t.getAttribute(e);for(var n in e)if(e[G](n)){var i=T(e[n]);i?"xlink:"==n.substring(0,6)?t.setAttributeNS(H,n.substring(6),i):"xml:"==n.substring(0,4)?t.setAttributeNS(Y,n.substring(4),i):t.setAttribute(n,i):t.removeAttribute(n)}}else t=S.doc.createElementNS(Y,t);return t}function s(t,e){return e=T.prototype.toLowerCase.call(e),"finite"==e?isFinite(t):"array"==e&&(t instanceof Array||Array.isArray&&Array.isArray(t))?!0:"null"==e&&null===t||e==typeof t&&null!==t||"object"==e&&t===Object(t)||E.call(t).slice(8,-1).toLowerCase()==e}function o(t){if("function"==typeof t||Object(t)!==t)return t;var e=new t.constructor;for(var n in t)t[G](n)&&(e[n]=o(t[n]));return e}function a(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return t.push(t.splice(n,1)[0])}function u(t,e,n){function i(){var r=Array.prototype.slice.call(arguments,0),s=r.join("␀"),o=i.cache=i.cache||{},u=i.count=i.count||[];return o[G](s)?(a(u,s),n?n(o[s]):o[s]):(u.length>=1e3&&delete o[u.shift()],u.push(s),o[s]=t.apply(e,r),n?n(o[s]):o[s])}return i}function l(t,e,n,i,r,s){if(null==r){var o=t-n,a=e-i;return o||a?(180+180*P.atan2(-a,-o)/B+360)%360:0}return l(t,e,r,s)-l(n,i,r,s)}function h(t){return t%360*B/180}function c(t){return 180*t/B%360}function f(t){var e=[];return t=t.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(t,n,i){return i=i.split(/\s*,\s*|\s+/),"rotate"==n&&1==i.length&&i.push(0,0),"scale"==n&&(i.length>2?i=i.slice(0,2):2==i.length&&i.push(0,0),1==i.length&&i.push(i[0],0,0)),"skewX"==n?e.push(["m",1,0,P.tan(h(i[0])),1,0,0]):"skewY"==n?e.push(["m",1,P.tan(h(i[0])),0,1,0,0]):e.push([n.charAt(0)].concat(i)),t}),e}function d(t,e){var n=re(t),r=new i.Matrix;if(n)for(var s=0,o=n.length;o>s;s++){var a,u,l,h,c,f=n[s],d=f.length,p=T(f[0]).toLowerCase(),g=f[0]!=p,m=g?r.invert():0;"t"==p&&2==d?r.translate(f[1],0):"t"==p&&3==d?g?(a=m.x(0,0),u=m.y(0,0),l=m.x(f[1],f[2]),h=m.y(f[1],f[2]),r.translate(l-a,h-u)):r.translate(f[1],f[2]):"r"==p?2==d?(c=c||e,r.rotate(f[1],c.x+c.width/2,c.y+c.height/2)):4==d&&(g?(l=m.x(f[2],f[3]),h=m.y(f[2],f[3]),r.rotate(f[1],l,h)):r.rotate(f[1],f[2],f[3])):"s"==p?2==d||3==d?(c=c||e,r.scale(f[1],f[d-1],c.x+c.width/2,c.y+c.height/2)):4==d?g?(l=m.x(f[2],f[3]),h=m.y(f[2],f[3]),r.scale(f[1],f[1],l,h)):r.scale(f[1],f[1],f[2],f[3]):5==d&&(g?(l=m.x(f[3],f[4]),h=m.y(f[3],f[4]),r.scale(f[1],f[2],l,h)):r.scale(f[1],f[2],f[3],f[4])):"m"==p&&7==d&&r.add(f[1],f[2],f[3],f[4],f[5],f[6])}return r}function p(t,e){if(null==e){var n=!0;if(e="linearGradient"==t.type||"radialGradient"==t.type?t.node.getAttribute("gradientTransform"):"pattern"==t.type?t.node.getAttribute("patternTransform"):t.node.getAttribute("transform"),!e)return new i.Matrix;e=f(e)}else e=i._.rgTransform.test(e)?T(e).replace(/\.{3}|\u2026/g,t._.transform||j):f(e),s(e,"array")&&(e=i.path?i.path.toString.call(e):T(e)),t._.transform=e;var r=d(e,t.getBBox(1));return n?r:(t.matrix=r,void 0)}function m(t){var e=t.node.ownerSVGElement&&k(t.node.ownerSVGElement)||t.node.parentNode&&k(t.node.parentNode)||i.select("svg")||i(0,0),n=e.select("defs"),r=null==n?!1:n.node;return r||(r=C("defs",e.node).node),r}function y(t){return t.node.ownerSVGElement&&k(t.node.ownerSVGElement)||i.select("svg")}function v(t,e,n){function i(t){if(null==t)return j;if(t==+t)return t;r(l,{width:t});try{return l.getBBox().width
}catch(e){return 0}}function s(t){if(null==t)return j;if(t==+t)return t;r(l,{height:t});try{return l.getBBox().height}catch(e){return 0}}function o(i,r){null==e?u[i]=r(t.attr(i)||0):i==e&&(u=r(null==n?t.attr(i)||0:n))}var a=y(t).node,u={},l=a.querySelector(".svg---mgr");switch(l||(l=r("rect"),r(l,{x:-9e9,y:-9e9,width:10,height:10,"class":"svg---mgr",fill:"none"}),a.appendChild(l)),t.type){case"rect":o("rx",i),o("ry",s);case"image":o("width",i),o("height",s);case"text":o("x",i),o("y",s);break;case"circle":o("cx",i),o("cy",s),o("r",i);break;case"ellipse":o("cx",i),o("cy",s),o("rx",i),o("ry",s);break;case"line":o("x1",i),o("x2",i),o("y1",s),o("y2",s);break;case"marker":o("refX",i),o("markerWidth",i),o("refY",s),o("markerHeight",s);break;case"radialGradient":o("fx",i),o("fy",s);break;case"tspan":o("dx",i),o("dy",s);break;default:o(e,i)}return a.removeChild(l),u}function b(t){s(t,"array")||(t=Array.prototype.slice.call(arguments,0));for(var e=0,n=0,i=this.node;this[e];)delete this[e++];for(e=0;e<t.length;e++)"set"==t[e].type?t[e].forEach(function(t){i.appendChild(t.node)}):i.appendChild(t[e].node);var r=i.childNodes;for(e=0;e<r.length;e++)this[n++]=k(r[e]);return this}function x(t){if(t.snap in W)return W[t.snap];var e,n=this.id=Q();try{e=t.ownerSVGElement}catch(i){}if(this.node=t,e&&(this.paper=new $(e)),this.type=t.tagName,this.anims={},this._={transform:[]},t.snap=n,W[n]=this,"g"==this.type&&(this.add=b),this.type in{g:1,mask:1,pattern:1})for(var r in $.prototype)$.prototype[G](r)&&(this[r]=$.prototype[r])}function w(t){this.node=t}function C(t,e){var n=r(t);e.appendChild(n);var i=k(n);return i}function $(t,e){var n,i,s,o=$.prototype;if(t&&"svg"==t.tagName){if(t.snap in W)return W[t.snap];var a=t.ownerDocument;n=new x(t),i=t.getElementsByTagName("desc")[0],s=t.getElementsByTagName("defs")[0],i||(i=r("desc"),i.appendChild(a.createTextNode("Created with Snap")),n.node.appendChild(i)),s||(s=r("defs"),n.node.appendChild(s)),n.defs=s;for(var u in o)o[G](u)&&(n[u]=o[u]);n.paper=n.root=n}else n=C("svg",S.doc.body),r(n.node,{height:e,version:1.1,width:t,xmlns:Y});return n}function k(t){return t?t instanceof x||t instanceof w?t:t.tagName&&"svg"==t.tagName.toLowerCase()?new $(t):t.tagName&&"object"==t.tagName.toLowerCase()&&"image/svg+xml"==t.type?new $(t.contentDocument.getElementsByTagName("svg")[0]):new x(t):t}i.version="0.3.0",i.toString=function(){return"Snap v"+this.version},i._={};var S={win:t,doc:t.document};i._.glob=S;var G="hasOwnProperty",T=String,A=parseFloat,M=parseInt,P=Math,N=P.max,z=P.min,I=P.abs,B=(P.pow,P.PI),j=(P.round,""),F=" ",E=Object.prototype.toString,_=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,R="	\n\f\r   ᠎             　\u2028\u2029",O=(i._.separator=new RegExp("[,"+R+"]+"),new RegExp("["+R+"]","g"),new RegExp("["+R+"]*,["+R+"]*")),L={hs:1,rg:1},q=new RegExp("([a-z])["+R+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+R+"]*,?["+R+"]*)+)","ig"),D=new RegExp("([rstm])["+R+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+R+"]*,?["+R+"]*)+)","ig"),V=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+R+"]*,?["+R+"]*","ig"),U=0,X="S"+(+new Date).toString(36),Q=function(){return X+(U++).toString(36)},H="http://www.w3.org/1999/xlink",Y="http://www.w3.org/2000/svg",W={},Z=i.url=function(t){return"url('#"+t+"')"};i._.$=r,i._.id=Q,i.format=function(){var t=/\{([^\}]+)\}/g,e=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,n=function(t,n,i){var r=i;return n.replace(e,function(t,e,n,i,s){e=e||i,r&&(e in r&&(r=r[e]),"function"==typeof r&&s&&(r=r()))}),r=(null==r||r==i?t:r)+""};return function(e,i){return T(e).replace(t,function(t,e){return n(t,e,i)})}}(),i._.clone=o,i._.cacher=u,i.rad=h,i.deg=c,i.angle=l,i.is=s,i.snapTo=function(t,e,n){if(n=s(n,"finite")?n:10,s(t,"array")){for(var i=t.length;i--;)if(I(t[i]-e)<=n)return t[i]}else{t=+t;var r=e%t;if(n>r)return e-r;if(r>t-n)return e-r+t}return e},i.getRGB=u(function(t){if(!t||(t=T(t)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ee};if("none"==t)return{r:-1,g:-1,b:-1,hex:"none",toString:ee};if(!(L[G](t.toLowerCase().substring(0,2))||"#"==t.charAt())&&(t=J(t)),!t)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ee};var e,n,r,o,a,u,l=t.match(_);return l?(l[2]&&(r=M(l[2].substring(5),16),n=M(l[2].substring(3,5),16),e=M(l[2].substring(1,3),16)),l[3]&&(r=M((a=l[3].charAt(3))+a,16),n=M((a=l[3].charAt(2))+a,16),e=M((a=l[3].charAt(1))+a,16)),l[4]&&(u=l[4].split(O),e=A(u[0]),"%"==u[0].slice(-1)&&(e*=2.55),n=A(u[1]),"%"==u[1].slice(-1)&&(n*=2.55),r=A(u[2]),"%"==u[2].slice(-1)&&(r*=2.55),"rgba"==l[1].toLowerCase().slice(0,4)&&(o=A(u[3])),u[3]&&"%"==u[3].slice(-1)&&(o/=100)),l[5]?(u=l[5].split(O),e=A(u[0]),"%"==u[0].slice(-1)&&(e/=100),n=A(u[1]),"%"==u[1].slice(-1)&&(n/=100),r=A(u[2]),"%"==u[2].slice(-1)&&(r/=100),("deg"==u[0].slice(-3)||"°"==u[0].slice(-1))&&(e/=360),"hsba"==l[1].toLowerCase().slice(0,4)&&(o=A(u[3])),u[3]&&"%"==u[3].slice(-1)&&(o/=100),i.hsb2rgb(e,n,r,o)):l[6]?(u=l[6].split(O),e=A(u[0]),"%"==u[0].slice(-1)&&(e/=100),n=A(u[1]),"%"==u[1].slice(-1)&&(n/=100),r=A(u[2]),"%"==u[2].slice(-1)&&(r/=100),("deg"==u[0].slice(-3)||"°"==u[0].slice(-1))&&(e/=360),"hsla"==l[1].toLowerCase().slice(0,4)&&(o=A(u[3])),u[3]&&"%"==u[3].slice(-1)&&(o/=100),i.hsl2rgb(e,n,r,o)):(e=z(P.round(e),255),n=z(P.round(n),255),r=z(P.round(r),255),o=z(N(o,0),1),l={r:e,g:n,b:r,toString:ee},l.hex="#"+(16777216|r|n<<8|e<<16).toString(16).slice(1),l.opacity=s(o,"finite")?o:1,l)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ee}},i),i.hsb=u(function(t,e,n){return i.hsb2rgb(t,e,n).hex}),i.hsl=u(function(t,e,n){return i.hsl2rgb(t,e,n).hex}),i.rgb=u(function(t,e,n,i){if(s(i,"finite")){var r=P.round;return"rgba("+[r(t),r(e),r(n),+i.toFixed(2)]+")"}return"#"+(16777216|n|e<<8|t<<16).toString(16).slice(1)});var J=function(t){var e=S.doc.getElementsByTagName("head")[0]||S.doc.getElementsByTagName("svg")[0],n="rgb(255, 0, 0)";return J=u(function(t){if("red"==t.toLowerCase())return n;e.style.color=n,e.style.color=t;var i=S.doc.defaultView.getComputedStyle(e,j).getPropertyValue("color");return i==n?null:i}),J(t)},K=function(){return"hsb("+[this.h,this.s,this.b]+")"},te=function(){return"hsl("+[this.h,this.s,this.l]+")"},ee=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},ne=function(t,e,n){if(null==e&&s(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(n=t.b,e=t.g,t=t.r),null==e&&s(t,string)){var r=i.getRGB(t);t=r.r,e=r.g,n=r.b}return(t>1||e>1||n>1)&&(t/=255,e/=255,n/=255),[t,e,n]},ie=function(t,e,n,r){t=P.round(255*t),e=P.round(255*e),n=P.round(255*n);var o={r:t,g:e,b:n,opacity:s(r,"finite")?r:1,hex:i.rgb(t,e,n),toString:ee};return s(r,"finite")&&(o.opacity=r),o};i.color=function(t){var e;return s(t,"object")&&"h"in t&&"s"in t&&"b"in t?(e=i.hsb2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.opacity=1,t.hex=e.hex):s(t,"object")&&"h"in t&&"s"in t&&"l"in t?(e=i.hsl2rgb(t),t.r=e.r,t.g=e.g,t.b=e.b,t.opacity=1,t.hex=e.hex):(s(t,"string")&&(t=i.getRGB(t)),s(t,"object")&&"r"in t&&"g"in t&&"b"in t&&!("error"in t)?(e=i.rgb2hsl(t),t.h=e.h,t.s=e.s,t.l=e.l,e=i.rgb2hsb(t),t.v=e.b):(t={hex:"none"},t.r=t.g=t.b=t.h=t.s=t.v=t.l=-1,t.error=1)),t.toString=ee,t},i.hsb2rgb=function(t,e,n,i){s(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(n=t.b,e=t.s,t=t.h,i=t.o),t*=360;var r,o,a,u,l;return t=t%360/60,l=n*e,u=l*(1-I(t%2-1)),r=o=a=n-l,t=~~t,r+=[l,u,0,0,u,l][t],o+=[u,l,l,u,0,0][t],a+=[0,0,u,l,l,u][t],ie(r,o,a,i)},i.hsl2rgb=function(t,e,n,i){s(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(n=t.l,e=t.s,t=t.h),(t>1||e>1||n>1)&&(t/=360,e/=100,n/=100),t*=360;var r,o,a,u,l;return t=t%360/60,l=2*e*(.5>n?n:1-n),u=l*(1-I(t%2-1)),r=o=a=n-l/2,t=~~t,r+=[l,u,0,0,u,l][t],o+=[u,l,l,u,0,0][t],a+=[0,0,u,l,l,u][t],ie(r,o,a,i)},i.rgb2hsb=function(t,e,n){n=ne(t,e,n),t=n[0],e=n[1],n=n[2];var i,r,s,o;return s=N(t,e,n),o=s-z(t,e,n),i=0==o?null:s==t?(e-n)/o:s==e?(n-t)/o+2:(t-e)/o+4,i=60*((i+360)%6)/360,r=0==o?0:o/s,{h:i,s:r,b:s,toString:K}},i.rgb2hsl=function(t,e,n){n=ne(t,e,n),t=n[0],e=n[1],n=n[2];var i,r,s,o,a,u;return o=N(t,e,n),a=z(t,e,n),u=o-a,i=0==u?null:o==t?(e-n)/u:o==e?(n-t)/u+2:(t-e)/u+4,i=60*((i+360)%6)/360,s=(o+a)/2,r=0==u?0:.5>s?u/(2*s):u/(2-2*s),{h:i,s:r,l:s,toString:te}},i.parsePathString=function(t){if(!t)return null;var e=i.path(t);if(e.arr)return i.path.clone(e.arr);var n={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},r=[];return s(t,"array")&&s(t[0],"array")&&(r=i.path.clone(t)),r.length||T(t).replace(q,function(t,e,i){var s=[],o=e.toLowerCase();if(i.replace(V,function(t,e){e&&s.push(+e)}),"m"==o&&s.length>2&&(r.push([e].concat(s.splice(0,2))),o="l",e="m"==e?"l":"L"),"o"==o&&1==s.length&&r.push([e,s[0]]),"r"==o)r.push([e].concat(s));else for(;s.length>=n[o]&&(r.push([e].concat(s.splice(0,n[o]))),n[o]););}),r.toString=i.path.toString,e.arr=i.path.clone(r),r};var re=i.parseTransformString=function(t){if(!t)return null;var e=[];return s(t,"array")&&s(t[0],"array")&&(e=i.path.clone(t)),e.length||T(t).replace(D,function(t,n,i){var r=[];n.toLowerCase(),i.replace(V,function(t,e){e&&r.push(+e)}),e.push([n].concat(r))}),e.toString=i.path.toString,e};i._.svgTransform2string=f,i._.rgTransform=new RegExp("^[a-z]["+R+"]*-?\\.?\\d","i"),i._.transform2matrix=d,i._unit2px=v,S.doc.contains||S.doc.compareDocumentPosition?function(t,e){var n=9==t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t==i||!(!i||1!=i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e;)if(e=e.parentNode,e==t)return!0;return!1},i._.getSomeDefs=m,i._.getSomeSVG=y,i.select=function(t){return k(S.doc.querySelector(t))},i.selectAll=function(t){for(var e=S.doc.querySelectorAll(t),n=(i.set||Array)(),r=0;r<e.length;r++)n.push(k(e[r]));return n},setInterval(function(){for(var t in W)if(W[G](t)){var e=W[t],n=e.node;("svg"!=e.type&&!n.ownerSVGElement||"svg"==e.type&&(!n.parentNode||"ownerSVGElement"in n.parentNode&&!n.ownerSVGElement))&&delete W[t]}},1e4),function(t){function o(t){function e(t,e){var n=r(t.node,e);n=n&&n.match(o),n=n&&n[2],n&&"#"==n.charAt()&&(n=n.substring(1),n&&(u[n]=(u[n]||[]).concat(function(n){var i={};i[e]=Z(n),r(t.node,i)})))}function n(t){var e=r(t.node,"xlink:href");e&&"#"==e.charAt()&&(e=e.substring(1),e&&(u[e]=(u[e]||[]).concat(function(e){t.attr("xlink:href","#"+e)})))}for(var i,s=t.selectAll("*"),o=/^\s*url\(("|'|)(.*)\1\)\s*$/,a=[],u={},l=0,h=s.length;h>l;l++){i=s[l],e(i,"fill"),e(i,"stroke"),e(i,"filter"),e(i,"mask"),e(i,"clip-path"),n(i);var c=r(i.node,"id");c&&(r(i.node,{id:i.id}),a.push({old:c,id:i.id}))}for(l=0,h=a.length;h>l;l++){var f=u[a[l].old];if(f)for(var d=0,p=f.length;p>d;d++)f[d](a[l].id)}}function a(t,e,n){return function(i){var r=i.slice(t,e);return 1==r.length&&(r=r[0]),n?n(r):r}}function u(t){return function(){var e=t?"<"+this.type:"",n=this.node.attributes,i=this.node.childNodes;if(t)for(var r=0,s=n.length;s>r;r++)e+=" "+n[r].name+'="'+n[r].value.replace(/"/g,'\\"')+'"';if(i.length){for(t&&(e+=">"),r=0,s=i.length;s>r;r++)3==i[r].nodeType?e+=i[r].nodeValue:1==i[r].nodeType&&(e+=k(i[r]).toString());t&&(e+="</"+this.type+">")}else t&&(e+="/>");return e}}t.attr=function(t,n){var i=this;if(i.node,!t)return i;if(s(t,"string")){if(!(arguments.length>1))return e("snap.util.getattr."+t,i).firstDefined();var r={};r[t]=n,t=r}for(var o in t)t[G](o)&&e("snap.util.attr."+o,i,t[o]);return i},t.getBBox=function(t){if(!i.Matrix||!i.path)return this.node.getBBox();var e=this,n=new i.Matrix;if(e.removed)return i._.box();for(;"use"==e.type;)if(t||(n=n.add(e.transform().localMatrix.translate(e.attr("x")||0,e.attr("y")||0))),e.original)e=e.original;else{var r=e.attr("xlink:href");e=e.original=e.node.ownerDocument.getElementById(r.substring(r.indexOf("#")+1))}var s=e._,o=i.path.get[e.type]||i.path.get.deflt;try{return t?(s.bboxwt=o?i.path.getBBox(e.realPath=o(e)):i._.box(e.node.getBBox()),i._.box(s.bboxwt)):(e.realPath=o(e),e.matrix=e.transform().localMatrix,s.bbox=i.path.getBBox(i.path.map(e.realPath,n.add(e.matrix))),i._.box(s.bbox))}catch(a){return i._.box()}};var l=function(){return this.string};t.transform=function(t){var e=this._;if(null==t){for(var n,s=this,o=new i.Matrix(this.node.getCTM()),a=p(this),u=[a],h=new i.Matrix,c=a.toTransformString(),f=T(a)==T(this.matrix)?T(e.transform):c;"svg"!=s.type&&(s=s.parent());)u.push(p(s));for(n=u.length;n--;)h.add(u[n]);return{string:f,globalMatrix:o,totalMatrix:h,localMatrix:a,diffMatrix:o.clone().add(a.invert()),global:o.toTransformString(),total:h.toTransformString(),local:c,toString:l}}return t instanceof i.Matrix?this.matrix=t:p(this,t),this.node&&("linearGradient"==this.type||"radialGradient"==this.type?r(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?r(this.node,{patternTransform:this.matrix}):r(this.node,{transform:this.matrix})),this},t.parent=function(){return k(this.node.parentNode)},t.append=t.add=function(t){if(t){if("set"==t.type){var e=this;return t.forEach(function(t){e.add(t)}),this}t=k(t),this.node.appendChild(t.node),t.paper=this.paper}return this},t.appendTo=function(t){return t&&(t=k(t),t.append(this)),this},t.prepend=function(t){if(t){if("set"==t.type){var e,n=this;return t.forEach(function(t){e?e.after(t):n.prepend(t),e=t}),this}t=k(t);var i=t.parent();this.node.insertBefore(t.node,this.node.firstChild),this.add&&this.add(),t.paper=this.paper,this.parent()&&this.parent().add(),i&&i.add()}return this},t.prependTo=function(t){return t=k(t),t.prepend(this),this},t.before=function(t){if("set"==t.type){var e=this;return t.forEach(function(t){var n=t.parent();e.node.parentNode.insertBefore(t.node,e.node),n&&n.add()}),this.parent().add(),this}t=k(t);var n=t.parent();return this.node.parentNode.insertBefore(t.node,this.node),this.parent()&&this.parent().add(),n&&n.add(),t.paper=this.paper,this},t.after=function(t){t=k(t);var e=t.parent();return this.node.nextSibling?this.node.parentNode.insertBefore(t.node,this.node.nextSibling):this.node.parentNode.appendChild(t.node),this.parent()&&this.parent().add(),e&&e.add(),t.paper=this.paper,this},t.insertBefore=function(t){t=k(t);var e=this.parent();return t.node.parentNode.insertBefore(this.node,t.node),this.paper=t.paper,e&&e.add(),t.parent()&&t.parent().add(),this},t.insertAfter=function(t){t=k(t);var e=this.parent();return t.node.parentNode.insertBefore(this.node,t.node.nextSibling),this.paper=t.paper,e&&e.add(),t.parent()&&t.parent().add(),this},t.remove=function(){var t=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,t&&t.add(),this},t.select=function(t){return k(this.node.querySelector(t))},t.selectAll=function(t){for(var e=this.node.querySelectorAll(t),n=(i.set||Array)(),r=0;r<e.length;r++)n.push(k(e[r]));return n},t.asPX=function(t,e){return null==e&&(e=this.attr(t)),+v(this,t,e)},t.use=function(){var t,e=this.node.id;return e||(e=this.id,r(this.node,{id:e})),t="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?C(this.type,this.node.parentNode):C("use",this.node.parentNode),r(t.node,{"xlink:href":"#"+e}),t.original=this,t};var h=/\S+/g;t.addClass=function(t){var e,n,i,r,s=(t||"").match(h)||[],o=this.node,a=o.className.baseVal,u=a.match(h)||[];if(s.length){for(e=0;i=s[e++];)n=u.indexOf(i),~n||u.push(i);r=u.join(" "),a!=r&&(o.className.baseVal=r)}return this},t.removeClass=function(t){var e,n,i,r,s=(t||"").match(h)||[],o=this.node,a=o.className.baseVal,u=a.match(h)||[];if(u.length){for(e=0;i=s[e++];)n=u.indexOf(i),~n&&u.splice(n,1);r=u.join(" "),a!=r&&(o.className.baseVal=r)}return this},t.hasClass=function(t){var e=this.node,n=e.className.baseVal,i=n.match(h)||[];return!!~i.indexOf(t)},t.toggleClass=function(t,e){if(null!=e)return e?this.addClass(t):this.removeClass(t);var n,i,r,s,o=(t||"").match(h)||[],a=this.node,u=a.className.baseVal,l=u.match(h)||[];for(n=0;r=o[n++];)i=l.indexOf(r),~i?l.splice(i,1):l.push(r);return s=l.join(" "),u!=s&&(a.className.baseVal=s),this},t.clone=function(){var t=k(this.node.cloneNode(!0));return r(t.node,"id")&&r(t.node,{id:t.id}),o(t),t.insertAfter(this),t},t.toDefs=function(){var t=m(this);return t.appendChild(this.node),this},t.pattern=t.toPattern=function(t,e,n,i){var o=C("pattern",m(this));return null==t&&(t=this.getBBox()),s(t,"object")&&"x"in t&&(e=t.y,n=t.width,i=t.height,t=t.x),r(o.node,{x:t,y:e,width:n,height:i,patternUnits:"userSpaceOnUse",id:o.id,viewBox:[t,e,n,i].join(" ")}),o.node.appendChild(this.node),o},t.marker=function(t,e,n,i,o,a){var u=C("marker",m(this));return null==t&&(t=this.getBBox()),s(t,"object")&&"x"in t&&(e=t.y,n=t.width,i=t.height,o=t.refX||t.cx,a=t.refY||t.cy,t=t.x),r(u.node,{viewBox:[t,e,n,i].join(F),markerWidth:n,markerHeight:i,orient:"auto",refX:o||0,refY:a||0,id:u.id}),u.node.appendChild(this.node),u};var c=function(t,e,i,r){"function"!=typeof i||i.length||(r=i,i=n.linear),this.attr=t,this.dur=e,i&&(this.easing=i),r&&(this.callback=r)};i._.Animation=c,i.animation=function(t,e,n,i){return new c(t,e,n,i)},t.inAnim=function(){var t=this,e=[];for(var n in t.anims)t.anims[G](n)&&function(t){e.push({anim:new c(t._attrs,t.dur,t.easing,t._callback),mina:t,curStatus:t.status(),status:function(e){return t.status(e)},stop:function(){t.stop()}})}(t.anims[n]);return e},i.animate=function(t,i,r,s,o,a){"function"!=typeof o||o.length||(a=o,o=n.linear);var u=n.time(),l=n(t,i,u,u+s,n.time,r,o);return a&&e.once("mina.finish."+l.id,a),l},t.stop=function(){for(var t=this.inAnim(),e=0,n=t.length;n>e;e++)t[e].stop();return this},t.animate=function(t,i,r,o){"function"!=typeof r||r.length||(o=r,r=n.linear),t instanceof c&&(o=t.callback,r=t.easing,i=r.dur,t=t.attr);var u,l,h,f,d=[],p=[],g={},m=this;for(var y in t)if(t[G](y)){m.equal?(f=m.equal(y,T(t[y])),u=f.from,l=f.to,h=f.f):(u=+m.attr(y),l=+t[y]);var v=s(u,"array")?u.length:1;g[y]=a(d.length,d.length+v,h),d=d.concat(u),p=p.concat(l)}var b=n.time(),x=n(d,p,b,b+i,n.time,function(t){var e={};for(var n in g)g[G](n)&&(e[n]=g[n](t));m.attr(e)},r);return m.anims[x.id]=x,x._attrs=t,x._callback=o,e("snap.animcreated."+m.id,x),e.once("mina.finish."+x.id,function(){delete m.anims[x.id],o&&o.call(m)}),e.once("mina.stop."+x.id,function(){delete m.anims[x.id]}),m};var f={};t.data=function(t,n){var r=f[this.id]=f[this.id]||{};if(0==arguments.length)return e("snap.data.get."+this.id,this,r,null),r;if(1==arguments.length){if(i.is(t,"object")){for(var s in t)t[G](s)&&this.data(s,t[s]);return this}return e("snap.data.get."+this.id,this,r[t],t),r[t]}return r[t]=n,e("snap.data.set."+this.id,this,n,t),this},t.removeData=function(t){return null==t?f[this.id]={}:f[this.id]&&delete f[this.id][t],this},t.outerSVG=t.toString=u(1),t.innerSVG=u()}(x.prototype),i.parse=function(t){var e=S.doc.createDocumentFragment(),n=!0,i=S.doc.createElement("div");if(t=T(t),t.match(/^\s*<\s*svg(?:\s|>)/)||(t="<svg>"+t+"</svg>",n=!1),i.innerHTML=t,t=i.getElementsByTagName("svg")[0])if(n)e=t;else for(;t.firstChild;)e.appendChild(t.firstChild);return i.innerHTML=j,new w(e)},w.prototype.select=x.prototype.select,w.prototype.selectAll=x.prototype.selectAll,i.fragment=function(){for(var t=Array.prototype.slice.call(arguments,0),e=S.doc.createDocumentFragment(),n=0,r=t.length;r>n;n++){var s=t[n];s.node&&s.node.nodeType&&e.appendChild(s.node),s.nodeType&&e.appendChild(s),"string"==typeof s&&e.appendChild(i.parse(s).node)}return new w(e)},i._.make=C,i._.wrap=k,$.prototype.el=function(t,e){var n=C(t,this.node);return e&&n.attr(e),n},e.on("snap.util.getattr",function(){var t=e.nt();t=t.substring(t.lastIndexOf(".")+1);var n=t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()});return se[G](n)?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(n):r(this.node,t)});var se={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};e.on("snap.util.attr",function(t){var n=e.nt(),i={};n=n.substring(n.lastIndexOf(".")+1),i[n]=t;var s=n.replace(/-(\w)/gi,function(t,e){return e.toUpperCase()}),o=n.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()});se[G](o)?this.node.style[s]=null==t?j:t:r(this.node,i)}),function(){}($.prototype),i.ajax=function(t,n,i,r){var o=new XMLHttpRequest,a=Q();if(o){if(s(n,"function"))r=i,i=n,n=null;else if(s(n,"object")){var u=[];for(var l in n)n.hasOwnProperty(l)&&u.push(encodeURIComponent(l)+"="+encodeURIComponent(n[l]));n=u.join("&")}return o.open(n?"POST":"GET",t,!0),n&&(o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("Content-type","application/x-www-form-urlencoded")),i&&(e.once("snap.ajax."+a+".0",i),e.once("snap.ajax."+a+".200",i),e.once("snap.ajax."+a+".304",i)),o.onreadystatechange=function(){4==o.readyState&&e("snap.ajax."+a+"."+o.status,r,o)},4==o.readyState?o:(o.send(n),o)}},i.load=function(t,e,n){i.ajax(t,function(t){var r=i.parse(t.responseText);n?e.call(n,r):e(r)})};var oe=function(t){var e=t.getBoundingClientRect(),n=t.ownerDocument,i=n.body,r=n.documentElement,s=r.clientTop||i.clientTop||0,o=r.clientLeft||i.clientLeft||0,a=e.top+(g.win.pageYOffset||r.scrollTop||i.scrollTop)-s,u=e.left+(g.win.pageXOffset||r.scrollLeft||i.scrollLeft)-o;return{y:a,x:u}};return i.getElementByPoint=function(t,e){var n=this,i=(n.canvas,S.doc.elementFromPoint(t,e));if(S.win.opera&&"svg"==i.tagName){var r=oe(i),s=i.createSVGRect();s.x=t-r.x,s.y=e-r.y,s.width=s.height=1;var o=i.getIntersectionList(s,null);o.length&&(i=o[o.length-1])}return i?k(i):null},i.plugin=function(t){t(i,x,$,S,w)},S.win.Snap=i,i}();return i.plugin(function(t){function e(t,e,i,r,s,o){return null==e&&"[object SVGMatrix]"==n.call(t)?(this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.e=t.e,this.f=t.f,void 0):(null!=t?(this.a=+t,this.b=+e,this.c=+i,this.d=+r,this.e=+s,this.f=+o):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0),void 0)}var n=Object.prototype.toString,i=String,r=Math,s="";!function(n){function o(t){return t[0]*t[0]+t[1]*t[1]}function a(t){var e=r.sqrt(o(t));t[0]&&(t[0]/=e),t[1]&&(t[1]/=e)}n.add=function(t,n,i,r,s,o){var a,u,l,h,c=[[],[],[]],f=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],d=[[t,i,s],[n,r,o],[0,0,1]];for(t&&t instanceof e&&(d=[[t.a,t.c,t.e],[t.b,t.d,t.f],[0,0,1]]),a=0;3>a;a++)for(u=0;3>u;u++){for(h=0,l=0;3>l;l++)h+=f[a][l]*d[l][u];c[a][u]=h}return this.a=c[0][0],this.b=c[1][0],this.c=c[0][1],this.d=c[1][1],this.e=c[0][2],this.f=c[1][2],this},n.invert=function(){var t=this,n=t.a*t.d-t.b*t.c;return new e(t.d/n,-t.b/n,-t.c/n,t.a/n,(t.c*t.f-t.d*t.e)/n,(t.b*t.e-t.a*t.f)/n)},n.clone=function(){return new e(this.a,this.b,this.c,this.d,this.e,this.f)},n.translate=function(t,e){return this.add(1,0,0,1,t,e)},n.scale=function(t,e,n,i){return null==e&&(e=t),(n||i)&&this.add(1,0,0,1,n,i),this.add(t,0,0,e,0,0),(n||i)&&this.add(1,0,0,1,-n,-i),this},n.rotate=function(e,n,i){e=t.rad(e),n=n||0,i=i||0;var s=+r.cos(e).toFixed(9),o=+r.sin(e).toFixed(9);return this.add(s,o,-o,s,n,i),this.add(1,0,0,1,-n,-i)},n.x=function(t,e){return t*this.a+e*this.c+this.e},n.y=function(t,e){return t*this.b+e*this.d+this.f},n.get=function(t){return+this[i.fromCharCode(97+t)].toFixed(4)},n.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"},n.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},n.determinant=function(){return this.a*this.d-this.b*this.c},n.split=function(){var e={};e.dx=this.e,e.dy=this.f;var n=[[this.a,this.c],[this.b,this.d]];e.scalex=r.sqrt(o(n[0])),a(n[0]),e.shear=n[0][0]*n[1][0]+n[0][1]*n[1][1],n[1]=[n[1][0]-n[0][0]*e.shear,n[1][1]-n[0][1]*e.shear],e.scaley=r.sqrt(o(n[1])),a(n[1]),e.shear/=e.scaley,this.determinant()<0&&(e.scalex=-e.scalex);var i=-n[0][1],s=n[1][1];return 0>s?(e.rotate=t.deg(r.acos(s)),0>i&&(e.rotate=360-e.rotate)):e.rotate=t.deg(r.asin(i)),e.isSimple=!(+e.shear.toFixed(9)||e.scalex.toFixed(9)!=e.scaley.toFixed(9)&&e.rotate),e.isSuperSimple=!+e.shear.toFixed(9)&&e.scalex.toFixed(9)==e.scaley.toFixed(9)&&!e.rotate,e.noRotation=!+e.shear.toFixed(9)&&!e.rotate,e},n.toTransformString=function(t){var e=t||this.split();return+e.shear.toFixed(9)?"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]:(e.scalex=+e.scalex.toFixed(4),e.scaley=+e.scaley.toFixed(4),e.rotate=+e.rotate.toFixed(4),(e.dx||e.dy?"t"+[+e.dx.toFixed(4),+e.dy.toFixed(4)]:s)+(1!=e.scalex||1!=e.scaley?"s"+[e.scalex,e.scaley,0,0]:s)+(e.rotate?"r"+[+e.rotate.toFixed(4),0,0]:s))}}(e.prototype),t.Matrix=e,t.matrix=function(t,n,i,r,s,o){return new e(t,n,i,r,s,o)}}),i.plugin(function(t,n,i,r,s){function o(i){return function(r){if(e.stop(),r instanceof s&&1==r.node.childNodes.length&&("radialGradient"==r.node.firstChild.tagName||"linearGradient"==r.node.firstChild.tagName||"pattern"==r.node.firstChild.tagName)&&(r=r.node.firstChild,d(this).appendChild(r),r=c(r)),r instanceof n)if("radialGradient"==r.type||"linearGradient"==r.type||"pattern"==r.type){r.node.id||g(r.node,{id:r.id});var o=m(r.node.id)}else o=r.attr(i);else if(o=t.color(r),o.error){var a=t(d(this).ownerSVGElement).gradient(r);a?(a.node.id||g(a.node,{id:a.id}),o=m(a.node.id)):o=r}else o=y(o);var u={};u[i]=o,g(this.node,u),this.node.style[i]=b}}function a(t){e.stop(),t==+t&&(t+="px"),this.node.style.fontSize=t}function u(t){for(var e=[],n=t.childNodes,i=0,r=n.length;r>i;i++){var s=n[i];3==s.nodeType&&e.push(s.nodeValue),"tspan"==s.tagName&&(1==s.childNodes.length&&3==s.firstChild.nodeType?e.push(s.firstChild.nodeValue):e.push(u(s)))}return e}function l(){return e.stop(),this.node.style.fontSize}var h=t._.make,c=t._.wrap,f=t.is,d=t._.getSomeDefs,p=/^url\(#?([^)]+)\)$/,g=t._.$,m=t.url,y=String,v=t._.separator,b="";e.on("snap.util.attr.mask",function(t){if(t instanceof n||t instanceof s){if(e.stop(),t instanceof s&&1==t.node.childNodes.length&&(t=t.node.firstChild,d(this).appendChild(t),t=c(t)),"mask"==t.type)var i=t;else i=h("mask",d(this)),i.node.appendChild(t.node);!i.node.id&&g(i.node,{id:i.id}),g(this.node,{mask:m(i.id)})}}),function(t){e.on("snap.util.attr.clip",t),e.on("snap.util.attr.clip-path",t),e.on("snap.util.attr.clipPath",t)}(function(t){if(t instanceof n||t instanceof s){if(e.stop(),"clipPath"==t.type)var i=t;else i=h("clipPath",d(this)),i.node.appendChild(t.node),!i.node.id&&g(i.node,{id:i.id});g(this.node,{"clip-path":m(i.id)})}}),e.on("snap.util.attr.fill",o("fill")),e.on("snap.util.attr.stroke",o("stroke"));var x=/^([lr])(?:\(([^)]*)\))?(.*)$/i;e.on("snap.util.grad.parse",function(t){t=y(t);var e=t.match(x);if(!e)return null;var n=e[1],i=e[2],r=e[3];return i=i.split(/\s*,\s*/).map(function(t){return+t==t?+t:t}),1==i.length&&0==i[0]&&(i=[]),r=r.split("-"),r=r.map(function(t){t=t.split(":");var e={color:t[0]};return t[1]&&(e.offset=parseFloat(t[1])),e}),{type:n,params:i,stops:r}}),e.on("snap.util.attr.d",function(n){e.stop(),f(n,"array")&&f(n[0],"array")&&(n=t.path.toString.call(n)),n=y(n),n.match(/[ruo]/i)&&(n=t.path.toAbsolute(n)),g(this.node,{d:n})})(-1),e.on("snap.util.attr.#text",function(t){e.stop(),t=y(t);for(var n=r.doc.createTextNode(t);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(n)})(-1),e.on("snap.util.attr.path",function(t){e.stop(),this.attr({d:t})})(-1),e.on("snap.util.attr.class",function(t){e.stop(),this.node.className.baseVal=t})(-1),e.on("snap.util.attr.viewBox",function(t){var n;n=f(t,"object")&&"x"in t?[t.x,t.y,t.width,t.height].join(" "):f(t,"array")?t.join(" "):t,g(this.node,{viewBox:n}),e.stop()})(-1),e.on("snap.util.attr.transform",function(t){this.transform(t),e.stop()})(-1),e.on("snap.util.attr.r",function(t){"rect"==this.type&&(e.stop(),g(this.node,{rx:t,ry:t}))})(-1),e.on("snap.util.attr.textpath",function(t){if(e.stop(),"text"==this.type){var i,r,s;if(!t&&this.textPath){for(r=this.textPath;r.node.firstChild;)this.node.appendChild(r.node.firstChild);return r.remove(),delete this.textPath,void 0}if(f(t,"string")){var o=d(this),a=c(o.parentNode).path(t);o.appendChild(a.node),i=a.id,a.attr({id:i})}else t=c(t),t instanceof n&&(i=t.attr("id"),i||(i=t.id,t.attr({id:i})));if(i)if(r=this.textPath,s=this.node,r)r.attr({"xlink:href":"#"+i});else{for(r=g("textPath",{"xlink:href":"#"+i});s.firstChild;)r.appendChild(s.firstChild);s.appendChild(r),this.textPath=c(r)}}})(-1),e.on("snap.util.attr.text",function(t){if("text"==this.type){for(var n=this.node,i=function(t){var e=g("tspan");if(f(t,"array"))for(var n=0;n<t.length;n++)e.appendChild(i(t[n]));else e.appendChild(r.doc.createTextNode(t));return e.normalize&&e.normalize(),e};n.firstChild;)n.removeChild(n.firstChild);for(var s=i(t);s.firstChild;)n.appendChild(s.firstChild)}e.stop()})(-1),e.on("snap.util.attr.fontSize",a)(-1),e.on("snap.util.attr.font-size",a)(-1),e.on("snap.util.getattr.transform",function(){return e.stop(),this.transform()})(-1),e.on("snap.util.getattr.textpath",function(){return e.stop(),this.textPath})(-1),function(){function n(n){return function(){e.stop();var i=r.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+n);return"none"==i?i:t(r.doc.getElementById(i.match(p)[1]))}}function i(t){return function(n){e.stop();var i="marker"+t.charAt(0).toUpperCase()+t.substring(1);if(""==n||!n)return this.node.style[i]="none",void 0;if("marker"==n.type){var r=n.node.id;return r||g(n.node,{id:n.id}),this.node.style[i]=m(r),void 0}}}e.on("snap.util.getattr.marker-end",n("end"))(-1),e.on("snap.util.getattr.markerEnd",n("end"))(-1),e.on("snap.util.getattr.marker-start",n("start"))(-1),e.on("snap.util.getattr.markerStart",n("start"))(-1),e.on("snap.util.getattr.marker-mid",n("mid"))(-1),e.on("snap.util.getattr.markerMid",n("mid"))(-1),e.on("snap.util.attr.marker-end",i("end"))(-1),e.on("snap.util.attr.markerEnd",i("end"))(-1),e.on("snap.util.attr.marker-start",i("start"))(-1),e.on("snap.util.attr.markerStart",i("start"))(-1),e.on("snap.util.attr.marker-mid",i("mid"))(-1),e.on("snap.util.attr.markerMid",i("mid"))(-1)}(),e.on("snap.util.getattr.r",function(){return"rect"==this.type&&g(this.node,"rx")==g(this.node,"ry")?(e.stop(),g(this.node,"rx")):void 0})(-1),e.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){e.stop();var t=u(this.node);return 1==t.length?t[0]:t}})(-1),e.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1),e.on("snap.util.getattr.viewBox",function(){e.stop();var n=g(this.node,"viewBox");return n?(n=n.split(v),t._.box(+n[0],+n[1],+n[2],+n[3])):void 0})(-1),e.on("snap.util.getattr.points",function(){var t=g(this.node,"points");return e.stop(),t?t.split(v):void 0})(-1),e.on("snap.util.getattr.path",function(){var t=g(this.node,"d");return e.stop(),t})(-1),e.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1),e.on("snap.util.getattr.fontSize",l)(-1),e.on("snap.util.getattr.font-size",l)(-1)}),i.plugin(function(){function t(t){return t}function n(t){return function(e){return+e.toFixed(3)+t}}var i={"+":function(t,e){return t+e},"-":function(t,e){return t-e},"/":function(t,e){return t/e},"*":function(t,e){return t*e
}},r=String,s=/[a-z]+$/i,o=/^\s*([+\-\/*])\s*=\s*([\d.eE+\-]+)\s*([^\d\s]+)?\s*$/;e.on("snap.util.attr",function(t){var n=r(t).match(o);if(n){var a=e.nt(),u=a.substring(a.lastIndexOf(".")+1),l=this.attr(u),h={};e.stop();var c=n[3]||"",f=l.match(s),d=i[n[1]];if(f&&f==c?t=d(parseFloat(l),+n[2]):(l=this.asPX(u),t=d(this.asPX(u),this.asPX(u,n[2]+c))),isNaN(l)||isNaN(t))return;h[u]=t,this.attr(h)}})(-10),e.on("snap.util.equal",function(a,u){var l=r(this.attr(a)||""),h=r(u).match(o);if(h){e.stop();var c=h[3]||"",f=l.match(s),d=i[h[1]];return f&&f==c?{from:parseFloat(l),to:d(parseFloat(l),+h[2]),f:n(f)}:(l=this.asPX(a),{from:l,to:d(l,this.asPX(a,h[2]+c)),f:t})}})(-10)}),i.plugin(function(t,n,i,r){var s=i.prototype,o=t.is;s.rect=function(t,e,n,i,r,s){var a;return null==s&&(s=r),o(t,"object")&&"[object Object]"==t?a=t:null!=t&&(a={x:t,y:e,width:n,height:i},null!=r&&(a.rx=r,a.ry=s)),this.el("rect",a)},s.circle=function(t,e,n){var i;return o(t,"object")&&"[object Object]"==t?i=t:null!=t&&(i={cx:t,cy:e,r:n}),this.el("circle",i)};var a=function(){function t(){this.parentNode.removeChild(this)}return function(e,n){var i=r.doc.createElement("img"),s=r.doc.body;i.style.cssText="position:absolute;left:-9999em;top:-9999em",i.onload=function(){n.call(i),i.onload=i.onerror=null,s.removeChild(i)},i.onerror=t,s.appendChild(i),i.src=e}}();s.image=function(e,n,i,r,s){var u=this.el("image");if(o(e,"object")&&"src"in e)u.attr(e);else if(null!=e){var l={"xlink:href":e,preserveAspectRatio:"none"};null!=n&&null!=i&&(l.x=n,l.y=i),null!=r&&null!=s?(l.width=r,l.height=s):a(e,function(){t._.$(u.node,{width:this.offsetWidth,height:this.offsetHeight})}),t._.$(u.node,l)}return u},s.ellipse=function(t,e,n,i){var r;return o(t,"object")&&"[object Object]"==t?r=t:null!=t&&(r={cx:t,cy:e,rx:n,ry:i}),this.el("ellipse",r)},s.path=function(t){var e;return o(t,"object")&&!o(t,"array")?e=t:t&&(e={d:t}),this.el("path",e)},s.group=s.g=function(t){var e=this.el("g");return 1==arguments.length&&t&&!t.type?e.attr(t):arguments.length&&e.add(Array.prototype.slice.call(arguments,0)),e},s.svg=function(t,e,n,i,r,s,a,u){var l={};return o(t,"object")&&null==e?l=t:(null!=t&&(l.x=t),null!=e&&(l.y=e),null!=n&&(l.width=n),null!=i&&(l.height=i),null!=r&&null!=s&&null!=a&&null!=u&&(l.viewBox=[r,s,a,u])),this.el("svg",l)},s.mask=function(t){var e=this.el("mask");return 1==arguments.length&&t&&!t.type?e.attr(t):arguments.length&&e.add(Array.prototype.slice.call(arguments,0)),e},s.ptrn=function(t,e,n,i,r,s,a,u){if(o(t,"object"))var l=t;else arguments.length?(l={},null!=t&&(l.x=t),null!=e&&(l.y=e),null!=n&&(l.width=n),null!=i&&(l.height=i),null!=r&&null!=s&&null!=a&&null!=u&&(l.viewBox=[r,s,a,u])):l={patternUnits:"userSpaceOnUse"};return this.el("pattern",l)},s.use=function(t){return null!=t?(make("use",this.node),t instanceof n&&(t.attr("id")||t.attr({id:ID()}),t=t.attr("id")),this.el("use",{"xlink:href":t})):n.prototype.use.call(this)},s.text=function(t,e,n){var i={};return o(t,"object")?i=t:null!=t&&(i={x:t,y:e,text:n||""}),this.el("text",i)},s.line=function(t,e,n,i){var r={};return o(t,"object")?r=t:null!=t&&(r={x1:t,x2:n,y1:e,y2:i}),this.el("line",r)},s.polyline=function(t){arguments.length>1&&(t=Array.prototype.slice.call(arguments,0));var e={};return o(t,"object")&&!o(t,"array")?e=t:null!=t&&(e={points:t}),this.el("polyline",e)},s.polygon=function(t){arguments.length>1&&(t=Array.prototype.slice.call(arguments,0));var e={};return o(t,"object")&&!o(t,"array")?e=t:null!=t&&(e={points:t}),this.el("polygon",e)},function(){function n(){return this.selectAll("stop")}function i(e,n){var i=l("stop"),r={offset:+n+"%"};return e=t.color(e),r["stop-color"]=e.hex,e.opacity<1&&(r["stop-opacity"]=e.opacity),l(i,r),this.node.appendChild(i),this}function r(){if("linearGradient"==this.type){var e=l(this.node,"x1")||0,n=l(this.node,"x2")||1,i=l(this.node,"y1")||0,r=l(this.node,"y2")||0;return t._.box(e,i,math.abs(n-e),math.abs(r-i))}var s=this.node.cx||.5,o=this.node.cy||.5,a=this.node.r||0;return t._.box(s-a,o-a,2*a,2*a)}function o(t,n){function i(t,e){for(var n=(e-c)/(t-f),i=f;t>i;i++)o[i].offset=+(+c+n*(i-f)).toFixed(2);f=t,c=e}var r,s=e("snap.util.grad.parse",null,n).firstDefined();if(!s)return null;s.params.unshift(t),r="l"==s.type.toLowerCase()?a.apply(0,s.params):u.apply(0,s.params),s.type!=s.type.toLowerCase()&&l(r.node,{gradientUnits:"userSpaceOnUse"});var o=s.stops,h=o.length,c=0,f=0;h--;for(var d=0;h>d;d++)"offset"in o[d]&&i(d,o[d].offset);for(o[h].offset=o[h].offset||100,i(h,o[h].offset),d=0;h>=d;d++){var p=o[d];r.addStop(p.color,p.offset)}return r}function a(e,s,o,a,u){var h=t._.make("linearGradient",e);return h.stops=n,h.addStop=i,h.getBBox=r,null!=s&&l(h.node,{x1:s,y1:o,x2:a,y2:u}),h}function u(e,s,o,a,u,h){var c=t._.make("radialGradient",e);return c.stops=n,c.addStop=i,c.getBBox=r,null!=s&&l(c.node,{cx:s,cy:o,r:a}),null!=u&&null!=h&&l(c.node,{fx:u,fy:h}),c}var l=t._.$;s.gradient=function(t){return o(this.defs,t)},s.gradientLinear=function(t,e,n,i){return a(this.defs,t,e,n,i)},s.gradientRadial=function(t,e,n,i,r){return u(this.defs,t,e,n,i,r)},s.toString=function(){var e,n=this.node.ownerDocument,i=n.createDocumentFragment(),r=n.createElement("div"),s=this.node.cloneNode(!0);return i.appendChild(r),r.appendChild(s),t._.$(s,{xmlns:"http://www.w3.org/2000/svg"}),e=r.innerHTML,i.removeChild(i.firstChild),e},s.clear=function(){for(var t,e=this.node.firstChild;e;)t=e.nextSibling,"defs"!=e.tagName?e.parentNode.removeChild(e):s.clear.call({node:e}),e=t}}()}),i.plugin(function(t,e){function n(t){var e=n.ps=n.ps||{};return e[t]?e[t].sleep=100:e[t]={sleep:100},setTimeout(function(){for(var n in e)e[F](n)&&n!=t&&(e[n].sleep--,!e[n].sleep&&delete e[n])}),e[t]}function i(t,e,n,i){return null==t&&(t=e=n=i=0),null==e&&(e=t.y,n=t.width,i=t.height,t=t.x),{x:t,y:e,width:n,w:n,height:i,h:i,x2:t+n,y2:e+i,cx:t+n/2,cy:e+i/2,r1:R.min(n,i)/2,r2:R.max(n,i)/2,r0:R.sqrt(n*n+i*i)/2,path:C(t,e,n,i),vb:[t,e,n,i].join(" ")}}function r(){return this.join(",").replace(E,"$1")}function s(t){var e=j(t);return e.toString=r,e}function o(t,e,n,i,r,s,o,a,l){return null==l?d(t,e,n,i,r,s,o,a):u(t,e,n,i,r,s,o,a,p(t,e,n,i,r,s,o,a,l))}function a(n,i){function r(t){return+(+t).toFixed(3)}return t._.cacher(function(t,s,a){t instanceof e&&(t=t.attr("d")),t=P(t);for(var l,h,c,f,d,p="",g={},m=0,y=0,v=t.length;v>y;y++){if(c=t[y],"M"==c[0])l=+c[1],h=+c[2];else{if(f=o(l,h,c[1],c[2],c[3],c[4],c[5],c[6]),m+f>s){if(i&&!g.start){if(d=o(l,h,c[1],c[2],c[3],c[4],c[5],c[6],s-m),p+=["C"+r(d.start.x),r(d.start.y),r(d.m.x),r(d.m.y),r(d.x),r(d.y)],a)return p;g.start=p,p=["M"+r(d.x),r(d.y)+"C"+r(d.n.x),r(d.n.y),r(d.end.x),r(d.end.y),r(c[5]),r(c[6])].join(),m+=f,l=+c[5],h=+c[6];continue}if(!n&&!i)return d=o(l,h,c[1],c[2],c[3],c[4],c[5],c[6],s-m)}m+=f,l=+c[5],h=+c[6]}p+=c.shift()+c}return g.end=p,d=n?m:i?g:u(l,h,c[0],c[1],c[2],c[3],c[4],c[5],1)},null,t._.clone)}function u(t,e,n,i,r,s,o,a,u){var l=1-u,h=D(l,3),c=D(l,2),f=u*u,d=f*u,p=h*t+3*c*u*n+3*l*u*u*r+d*o,g=h*e+3*c*u*i+3*l*u*u*s+d*a,m=t+2*u*(n-t)+f*(r-2*n+t),y=e+2*u*(i-e)+f*(s-2*i+e),v=n+2*u*(r-n)+f*(o-2*r+n),b=i+2*u*(s-i)+f*(a-2*s+i),x=l*t+u*n,w=l*e+u*i,C=l*r+u*o,$=l*s+u*a,k=90-180*R.atan2(m-v,y-b)/O;return{x:p,y:g,m:{x:m,y:y},n:{x:v,y:b},start:{x:x,y:w},end:{x:C,y:$},alpha:k}}function l(e,n,r,s,o,a,u,l){t.is(e,"array")||(e=[e,n,r,s,o,a,u,l]);var h=M.apply(null,e);return i(h.min.x,h.min.y,h.max.x-h.min.x,h.max.y-h.min.y)}function h(t,e,n){return e>=t.x&&e<=t.x+t.width&&n>=t.y&&n<=t.y+t.height}function c(t,e){return t=i(t),e=i(e),h(e,t.x,t.y)||h(e,t.x2,t.y)||h(e,t.x,t.y2)||h(e,t.x2,t.y2)||h(t,e.x,e.y)||h(t,e.x2,e.y)||h(t,e.x,e.y2)||h(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)}function f(t,e,n,i,r){var s=-3*e+9*n-9*i+3*r,o=t*s+6*e-12*n+6*i;return t*o-3*e+3*n}function d(t,e,n,i,r,s,o,a,u){null==u&&(u=1),u=u>1?1:0>u?0:u;for(var l=u/2,h=12,c=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,g=0;h>g;g++){var m=l*c[g]+l,y=f(m,t,n,r,o),v=f(m,e,i,s,a),b=y*y+v*v;p+=d[g]*R.sqrt(b)}return l*p}function p(t,e,n,i,r,s,o,a,u){if(!(0>u||d(t,e,n,i,r,s,o,a)<u)){var l,h=1,c=h/2,f=h-c,p=.01;for(l=d(t,e,n,i,r,s,o,a,f);V(l-u)>p;)c/=2,f+=(u>l?1:-1)*c,l=d(t,e,n,i,r,s,o,a,f);return f}}function g(t,e,n,i,r,s,o,a){if(!(q(t,n)<L(r,o)||L(t,n)>q(r,o)||q(e,i)<L(s,a)||L(e,i)>q(s,a))){var u=(t*i-e*n)*(r-o)-(t-n)*(r*a-s*o),l=(t*i-e*n)*(s-a)-(e-i)*(r*a-s*o),h=(t-n)*(s-a)-(e-i)*(r-o);if(h){var c=u/h,f=l/h,d=+c.toFixed(2),p=+f.toFixed(2);if(!(d<+L(t,n).toFixed(2)||d>+q(t,n).toFixed(2)||d<+L(r,o).toFixed(2)||d>+q(r,o).toFixed(2)||p<+L(e,i).toFixed(2)||p>+q(e,i).toFixed(2)||p<+L(s,a).toFixed(2)||p>+q(s,a).toFixed(2)))return{x:c,y:f}}}}function m(t,e,n){var i=l(t),r=l(e);if(!c(i,r))return n?0:[];for(var s=d.apply(0,t),o=d.apply(0,e),a=~~(s/8),h=~~(o/8),f=[],p=[],m={},y=n?0:[],v=0;a+1>v;v++){var b=u.apply(0,t.concat(v/a));f.push({x:b.x,y:b.y,t:v/a})}for(v=0;h+1>v;v++)b=u.apply(0,e.concat(v/h)),p.push({x:b.x,y:b.y,t:v/h});for(v=0;a>v;v++)for(var x=0;h>x;x++){var w=f[v],C=f[v+1],$=p[x],k=p[x+1],S=V(C.x-w.x)<.001?"y":"x",G=V(k.x-$.x)<.001?"y":"x",T=g(w.x,w.y,C.x,C.y,$.x,$.y,k.x,k.y);if(T){if(m[T.x.toFixed(4)]==T.y.toFixed(4))continue;m[T.x.toFixed(4)]=T.y.toFixed(4);var A=w.t+V((T[S]-w[S])/(C[S]-w[S]))*(C.t-w.t),M=$.t+V((T[G]-$[G])/(k[G]-$[G]))*(k.t-$.t);A>=0&&1>=A&&M>=0&&1>=M&&(n?y++:y.push({x:T.x,y:T.y,t1:A,t2:M}))}}return y}function y(t,e){return b(t,e)}function v(t,e){return b(t,e,1)}function b(t,e,n){t=P(t),e=P(e);for(var i,r,s,o,a,u,l,h,c,f,d=n?0:[],p=0,g=t.length;g>p;p++){var y=t[p];if("M"==y[0])i=a=y[1],r=u=y[2];else{"C"==y[0]?(c=[i,r].concat(y.slice(1)),i=c[6],r=c[7]):(c=[i,r,i,r,a,u,a,u],i=a,r=u);for(var v=0,b=e.length;b>v;v++){var x=e[v];if("M"==x[0])s=l=x[1],o=h=x[2];else{"C"==x[0]?(f=[s,o].concat(x.slice(1)),s=f[6],o=f[7]):(f=[s,o,s,o,l,h,l,h],s=l,o=h);var w=m(c,f,n);if(n)d+=w;else{for(var C=0,$=w.length;$>C;C++)w[C].segment1=p,w[C].segment2=v,w[C].bez1=c,w[C].bez2=f;d=d.concat(w)}}}}}return d}function x(t,e,n){var i=w(t);return h(i,e,n)&&1==b(t,[["M",e,n],["H",i.x2+10]],1)%2}function w(t){var e=n(t);if(e.bbox)return j(e.bbox);if(!t)return i();t=P(t);for(var r,s=0,o=0,a=[],u=[],l=0,h=t.length;h>l;l++)if(r=t[l],"M"==r[0])s=r[1],o=r[2],a.push(s),u.push(o);else{var c=M(s,o,r[1],r[2],r[3],r[4],r[5],r[6]);a=a.concat(c.min.x,c.max.x),u=u.concat(c.min.y,c.max.y),s=r[5],o=r[6]}var f=L.apply(0,a),d=L.apply(0,u),p=q.apply(0,a),g=q.apply(0,u),m=i(f,d,p-f,g-d);return e.bbox=j(m),m}function C(t,e,n,i,s){if(s)return[["M",+t+ +s,e],["l",n-2*s,0],["a",s,s,0,0,1,s,s],["l",0,i-2*s],["a",s,s,0,0,1,-s,s],["l",2*s-n,0],["a",s,s,0,0,1,-s,-s],["l",0,2*s-i],["a",s,s,0,0,1,s,-s],["z"]];var o=[["M",t,e],["l",n,0],["l",0,i],["l",-n,0],["z"]];return o.toString=r,o}function $(t,e,n,i,s){if(null==s&&null==i&&(i=n),t=+t,e=+e,n=+n,i=+i,null!=s)var o=Math.PI/180,a=t+n*Math.cos(-i*o),u=t+n*Math.cos(-s*o),l=e+n*Math.sin(-i*o),h=e+n*Math.sin(-s*o),c=[["M",a,l],["A",n,n,0,+(s-i>180),0,u,h]];else c=[["M",t,e],["m",0,-i],["a",n,i,0,1,1,0,2*i],["a",n,i,0,1,1,0,-2*i],["z"]];return c.toString=r,c}function k(e){var i=n(e),o=String.prototype.toLowerCase;if(i.rel)return s(i.rel);t.is(e,"array")&&t.is(e&&e[0],"array")||(e=t.parsePathString(e));var a=[],u=0,l=0,h=0,c=0,f=0;"M"==e[0][0]&&(u=e[0][1],l=e[0][2],h=u,c=l,f++,a.push(["M",u,l]));for(var d=f,p=e.length;p>d;d++){var g=a[d]=[],m=e[d];if(m[0]!=o.call(m[0]))switch(g[0]=o.call(m[0]),g[0]){case"a":g[1]=m[1],g[2]=m[2],g[3]=m[3],g[4]=m[4],g[5]=m[5],g[6]=+(m[6]-u).toFixed(3),g[7]=+(m[7]-l).toFixed(3);break;case"v":g[1]=+(m[1]-l).toFixed(3);break;case"m":h=m[1],c=m[2];default:for(var y=1,v=m.length;v>y;y++)g[y]=+(m[y]-(y%2?u:l)).toFixed(3)}else{g=a[d]=[],"m"==m[0]&&(h=m[1]+u,c=m[2]+l);for(var b=0,x=m.length;x>b;b++)a[d][b]=m[b]}var w=a[d].length;switch(a[d][0]){case"z":u=h,l=c;break;case"h":u+=+a[d][w-1];break;case"v":l+=+a[d][w-1];break;default:u+=+a[d][w-2],l+=+a[d][w-1]}}return a.toString=r,i.rel=s(a),a}function S(e){var i=n(e);if(i.abs)return s(i.abs);if(B(e,"array")&&B(e&&e[0],"array")||(e=t.parsePathString(e)),!e||!e.length)return[["M",0,0]];var o,a=[],u=0,l=0,h=0,c=0,f=0;"M"==e[0][0]&&(u=+e[0][1],l=+e[0][2],h=u,c=l,f++,a[0]=["M",u,l]);for(var d,p,g=3==e.length&&"M"==e[0][0]&&"R"==e[1][0].toUpperCase()&&"Z"==e[2][0].toUpperCase(),m=f,y=e.length;y>m;m++){if(a.push(d=[]),p=e[m],o=p[0],o!=o.toUpperCase())switch(d[0]=o.toUpperCase(),d[0]){case"A":d[1]=p[1],d[2]=p[2],d[3]=p[3],d[4]=p[4],d[5]=p[5],d[6]=+p[6]+u,d[7]=+p[7]+l;break;case"V":d[1]=+p[1]+l;break;case"H":d[1]=+p[1]+u;break;case"R":for(var v=[u,l].concat(p.slice(1)),b=2,x=v.length;x>b;b++)v[b]=+v[b]+u,v[++b]=+v[b]+l;a.pop(),a=a.concat(z(v,g));break;case"O":a.pop(),v=$(u,l,p[1],p[2]),v.push(v[0]),a=a.concat(v);break;case"U":a.pop(),a=a.concat($(u,l,p[1],p[2],p[3])),d=["U"].concat(a[a.length-1].slice(-2));break;case"M":h=+p[1]+u,c=+p[2]+l;default:for(b=1,x=p.length;x>b;b++)d[b]=+p[b]+(b%2?u:l)}else if("R"==o)v=[u,l].concat(p.slice(1)),a.pop(),a=a.concat(z(v,g)),d=["R"].concat(p.slice(-2));else if("O"==o)a.pop(),v=$(u,l,p[1],p[2]),v.push(v[0]),a=a.concat(v);else if("U"==o)a.pop(),a=a.concat($(u,l,p[1],p[2],p[3])),d=["U"].concat(a[a.length-1].slice(-2));else for(var w=0,C=p.length;C>w;w++)d[w]=p[w];if(o=o.toUpperCase(),"O"!=o)switch(d[0]){case"Z":u=+h,l=+c;break;case"H":u=d[1];break;case"V":l=d[1];break;case"M":h=d[d.length-2],c=d[d.length-1];default:u=d[d.length-2],l=d[d.length-1]}}return a.toString=r,i.abs=s(a),a}function G(t,e,n,i){return[t,e,n,i,n,i]}function T(t,e,n,i,r,s){var o=1/3,a=2/3;return[o*t+a*n,o*e+a*i,o*r+a*n,o*s+a*i,r,s]}function A(e,n,i,r,s,o,a,u,l,h){var c,f=120*O/180,d=O/180*(+s||0),p=[],g=t._.cacher(function(t,e,n){var i=t*R.cos(n)-e*R.sin(n),r=t*R.sin(n)+e*R.cos(n);return{x:i,y:r}});if(h)k=h[0],S=h[1],C=h[2],$=h[3];else{c=g(e,n,-d),e=c.x,n=c.y,c=g(u,l,-d),u=c.x,l=c.y;var m=(R.cos(O/180*s),R.sin(O/180*s),(e-u)/2),y=(n-l)/2,v=m*m/(i*i)+y*y/(r*r);v>1&&(v=R.sqrt(v),i=v*i,r=v*r);var b=i*i,x=r*r,w=(o==a?-1:1)*R.sqrt(V((b*x-b*y*y-x*m*m)/(b*y*y+x*m*m))),C=w*i*y/r+(e+u)/2,$=w*-r*m/i+(n+l)/2,k=R.asin(((n-$)/r).toFixed(9)),S=R.asin(((l-$)/r).toFixed(9));k=C>e?O-k:k,S=C>u?O-S:S,0>k&&(k=2*O+k),0>S&&(S=2*O+S),a&&k>S&&(k-=2*O),!a&&S>k&&(S-=2*O)}var G=S-k;if(V(G)>f){var T=S,M=u,P=l;S=k+f*(a&&S>k?1:-1),u=C+i*R.cos(S),l=$+r*R.sin(S),p=A(u,l,i,r,s,0,a,M,P,[S,T,C,$])}G=S-k;var N=R.cos(k),z=R.sin(k),I=R.cos(S),B=R.sin(S),j=R.tan(G/4),F=4/3*i*j,E=4/3*r*j,_=[e,n],L=[e+F*z,n-E*N],q=[u+F*B,l-E*I],D=[u,l];if(L[0]=2*_[0]-L[0],L[1]=2*_[1]-L[1],h)return[L,q,D].concat(p);p=[L,q,D].concat(p).join().split(",");for(var U=[],X=0,Q=p.length;Q>X;X++)U[X]=X%2?g(p[X-1],p[X],d).y:g(p[X],p[X+1],d).x;return U}function M(t,e,n,i,r,s,o,a){for(var u,l,h,c,f,d,p,g,m=[],y=[[],[]],v=0;2>v;++v)if(0==v?(l=6*t-12*n+6*r,u=-3*t+9*n-9*r+3*o,h=3*n-3*t):(l=6*e-12*i+6*s,u=-3*e+9*i-9*s+3*a,h=3*i-3*e),V(u)<1e-12){if(V(l)<1e-12)continue;c=-h/l,c>0&&1>c&&m.push(c)}else p=l*l-4*h*u,g=R.sqrt(p),0>p||(f=(-l+g)/(2*u),f>0&&1>f&&m.push(f),d=(-l-g)/(2*u),d>0&&1>d&&m.push(d));for(var b,x=m.length,w=x;x--;)c=m[x],b=1-c,y[0][x]=b*b*b*t+3*b*b*c*n+3*b*c*c*r+c*c*c*o,y[1][x]=b*b*b*e+3*b*b*c*i+3*b*c*c*s+c*c*c*a;return y[0][w]=t,y[1][w]=e,y[0][w+1]=o,y[1][w+1]=a,y[0].length=y[1].length=w+2,{min:{x:L.apply(0,y[0]),y:L.apply(0,y[1])},max:{x:q.apply(0,y[0]),y:q.apply(0,y[1])}}}function P(t,e){var i=!e&&n(t);if(!e&&i.curve)return s(i.curve);for(var r=S(t),o=e&&S(e),a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},u={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l=(function(t,e,n){var i,r;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(A.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"==n||"S"==n?(i=2*e.x-e.bx,r=2*e.y-e.by):(i=e.x,r=e.y),t=["C",i,r].concat(t.slice(1));break;case"T":"Q"==n||"T"==n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(T(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(T(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(G(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(G(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(G(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(G(e.x,e.y,e.X,e.Y))}return t}),h=function(t,e){if(t[e].length>7){t[e].shift();for(var n=t[e];n.length;)f[e]="A",o&&(d[e]="A"),t.splice(e++,0,["C"].concat(n.splice(0,6)));t.splice(e,1),y=q(r.length,o&&o.length||0)}},c=function(t,e,n,i,s){t&&e&&"M"==t[s][0]&&"M"!=e[s][0]&&(e.splice(s,0,["M",i.x,i.y]),n.bx=0,n.by=0,n.x=t[s][1],n.y=t[s][2],y=q(r.length,o&&o.length||0))},f=[],d=[],p="",g="",m=0,y=q(r.length,o&&o.length||0);y>m;m++){r[m]&&(p=r[m][0]),"C"!=p&&(f[m]=p,m&&(g=f[m-1])),r[m]=l(r[m],a,g),"A"!=f[m]&&"C"==p&&(f[m]="C"),h(r,m),o&&(o[m]&&(p=o[m][0]),"C"!=p&&(d[m]=p,m&&(g=d[m-1])),o[m]=l(o[m],u,g),"A"!=d[m]&&"C"==p&&(d[m]="C"),h(o,m)),c(r,o,a,u,m),c(o,r,u,a,m);var v=r[m],b=o&&o[m],x=v.length,w=o&&b.length;a.x=v[x-2],a.y=v[x-1],a.bx=_(v[x-4])||a.x,a.by=_(v[x-3])||a.y,u.bx=o&&(_(b[w-4])||u.x),u.by=o&&(_(b[w-3])||u.y),u.x=o&&b[w-2],u.y=o&&b[w-1]}return o||(i.curve=s(r)),o?[r,o]:r}function N(t,e){if(!e)return t;var n,i,r,s,o,a,u;for(t=P(t),r=0,o=t.length;o>r;r++)for(u=t[r],s=1,a=u.length;a>s;s+=2)n=e.x(u[s],u[s+1]),i=e.y(u[s],u[s+1]),u[s]=n,u[s+1]=i;return t}function z(t,e){for(var n=[],i=0,r=t.length;r-2*!e>i;i+=2){var s=[{x:+t[i-2],y:+t[i-1]},{x:+t[i],y:+t[i+1]},{x:+t[i+2],y:+t[i+3]},{x:+t[i+4],y:+t[i+5]}];e?i?r-4==i?s[3]={x:+t[0],y:+t[1]}:r-2==i&&(s[2]={x:+t[0],y:+t[1]},s[3]={x:+t[2],y:+t[3]}):s[0]={x:+t[r-2],y:+t[r-1]}:r-4==i?s[3]=s[2]:i||(s[0]={x:+t[i],y:+t[i+1]}),n.push(["C",(-s[0].x+6*s[1].x+s[2].x)/6,(-s[0].y+6*s[1].y+s[2].y)/6,(s[1].x+6*s[2].x-s[3].x)/6,(s[1].y+6*s[2].y-s[3].y)/6,s[2].x,s[2].y])}return n}var I=e.prototype,B=t.is,j=t._.clone,F="hasOwnProperty",E=/,?([a-z]),?/gi,_=parseFloat,R=Math,O=R.PI,L=R.min,q=R.max,D=R.pow,V=R.abs,U=a(1),X=a(),Q=a(0,1),H=t._unit2px,Y={path:function(t){return t.attr("path")},circle:function(t){var e=H(t);return $(e.cx,e.cy,e.r)},ellipse:function(t){var e=H(t);return $(e.cx||0,e.cy||0,e.rx,e.ry)},rect:function(t){var e=H(t);return C(e.x||0,e.y||0,e.width,e.height,e.rx,e.ry)},image:function(t){var e=H(t);return C(e.x||0,e.y||0,e.width,e.height)},line:function(t){return"M"+[t.attr("x1")||0,t.attr("y1")||0,t.attr("x2"),t.attr("y2")]},polyline:function(t){return"M"+t.attr("points")},polygon:function(t){return"M"+t.attr("points")+"z"},deflt:function(t){var e=t.node.getBBox();return C(e.x,e.y,e.width,e.height)}};t.path=n,t.path.getTotalLength=U,t.path.getPointAtLength=X,t.path.getSubpath=function(t,e,n){if(this.getTotalLength(t)-n<1e-6)return Q(t,e).end;var i=Q(t,n,1);return e?Q(i,e).end:i},I.getTotalLength=function(){return this.node.getTotalLength?this.node.getTotalLength():void 0},I.getPointAtLength=function(t){return X(this.attr("d"),t)},I.getSubpath=function(e,n){return t.path.getSubpath(this.attr("d"),e,n)},t._.box=i,t.path.findDotsAtSegment=u,t.path.bezierBBox=l,t.path.isPointInsideBBox=h,t.path.isBBoxIntersect=c,t.path.intersection=y,t.path.intersectionNumber=v,t.path.isPointInside=x,t.path.getBBox=w,t.path.get=Y,t.path.toRelative=k,t.path.toAbsolute=S,t.path.toCubic=P,t.path.map=N,t.path.toString=r,t.path.clone=s}),i.plugin(function(t){var i=Math.max,r=Math.min,s=function(t){if(this.items=[],this.bindings={},this.length=0,this.type="set",t)for(var e=0,n=t.length;n>e;e++)t[e]&&(this[this.items.length]=this.items[this.items.length]=t[e],this.length++)},o=s.prototype;o.push=function(){for(var t,e,n=0,i=arguments.length;i>n;n++)t=arguments[n],t&&(e=this.items.length,this[e]=this.items[e]=t,this.length++);return this},o.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},o.forEach=function(t,e){for(var n=0,i=this.items.length;i>n;n++)if(t.call(e,this.items[n],n)===!1)return this;return this},o.animate=function(i,r,s,o){"function"!=typeof s||s.length||(o=s,s=n.linear),i instanceof t._.Animation&&(o=i.callback,s=i.easing,r=s.dur,i=i.attr);var a=arguments;if(t.is(i,"array")&&t.is(a[a.length-1],"array"))var u=!0;var l,h=function(){l?this.b=l:l=this.b},c=0,f=o&&function(){c++==this.length&&o.call(this)};return this.forEach(function(t,n){e.once("snap.animcreated."+t.id,h),u?a[n]&&t.animate.apply(t,a[n]):t.animate(i,r,s,f)})},o.remove=function(){for(;this.length;)this.pop().remove();return this},o.bind=function(t,e,n){var i={};if("function"==typeof e)this.bindings[t]=e;else{var r=n||t;this.bindings[t]=function(t){i[r]=t,e.attr(i)}}return this},o.attr=function(t){var e={};for(var n in t)this.bindings[n]?this.bindings[n](t[n]):e[n]=t[n];for(var i=0,r=this.items.length;r>i;i++)this.items[i].attr(e);return this},o.clear=function(){for(;this.length;)this.pop()},o.splice=function(t,e){t=0>t?i(this.length+t,0):t,e=i(0,r(this.length-t,e));var n,o=[],a=[],u=[];for(n=2;n<arguments.length;n++)u.push(arguments[n]);for(n=0;e>n;n++)a.push(this[t+n]);for(;n<this.length-t;n++)o.push(this[t+n]);var l=u.length;for(n=0;n<l+o.length;n++)this.items[t+n]=this[t+n]=l>n?u[n]:o[n-l];for(n=this.items.length=this.length-=e-l;this[n];)delete this[n++];return new s(a)},o.exclude=function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]==t)return this.splice(e,1),!0;return!1},o.insertAfter=function(t){for(var e=this.items.length;e--;)this.items[e].insertAfter(t);return this},o.getBBox=function(){for(var t=[],e=[],n=[],s=[],o=this.items.length;o--;)if(!this.items[o].removed){var a=this.items[o].getBBox();t.push(a.x),e.push(a.y),n.push(a.x+a.width),s.push(a.y+a.height)}return t=r.apply(0,t),e=r.apply(0,e),n=i.apply(0,n),s=i.apply(0,s),{x:t,y:e,x2:n,y2:s,width:n-t,height:s-e,cx:t+(n-t)/2,cy:e+(s-e)/2}},o.clone=function(t){t=new s;for(var e=0,n=this.items.length;n>e;e++)t.push(this.items[e].clone());return t},o.toString=function(){return"Snap‘s set"},o.type="set",t.set=function(){var t=new s;return arguments.length&&t.push.apply(t,Array.prototype.slice.call(arguments,0)),t}}),i.plugin(function(t,n){function i(t){var e=t[0];switch(e.toLowerCase()){case"t":return[e,0,0];case"m":return[e,1,0,0,1,0,0];case"r":return 4==t.length?[e,0,t[2],t[3]]:[e,0];case"s":return 5==t.length?[e,1,1,t[3],t[4]]:3==t.length?[e,1,1]:[e,1]}}function r(e,n,r){n=f(n).replace(/\.{3}|\u2026/g,e),e=t.parseTransformString(e)||[],n=t.parseTransformString(n)||[];for(var s,o,a,h,c=Math.max(e.length,n.length),d=[],p=[],g=0;c>g;g++){if(a=e[g]||i(n[g]),h=n[g]||i(a),a[0]!=h[0]||"r"==a[0].toLowerCase()&&(a[2]!=h[2]||a[3]!=h[3])||"s"==a[0].toLowerCase()&&(a[3]!=h[3]||a[4]!=h[4])){e=t._.transform2matrix(e,r()),n=t._.transform2matrix(n,r()),d=[["m",e.a,e.b,e.c,e.d,e.e,e.f]],p=[["m",n.a,n.b,n.c,n.d,n.e,n.f]];break}for(d[g]=[],p[g]=[],s=0,o=Math.max(a.length,h.length);o>s;s++)s in a&&(d[g][s]=a[s]),s in h&&(p[g][s]=h[s])}return{from:l(d),to:l(p),f:u(d)}}function s(t){return t}function o(t){return function(e){return+e.toFixed(3)+t}}function a(e){return t.rgb(e[0],e[1],e[2])}function u(t){var e,n,i,r,s,o,a=0,u=[];for(e=0,n=t.length;n>e;e++){for(s="[",o=['"'+t[e][0]+'"'],i=1,r=t[e].length;r>i;i++)o[i]="val["+a++ +"]";s+=o+"]",u[e]=s}return Function("val","return Snap.path.toString.call(["+u+"])")}function l(t){for(var e=[],n=0,i=t.length;i>n;n++)for(var r=1,s=t[n].length;s>r;r++)e.push(t[n][r]);return e}var h={},c=/[a-z]+$/i,f=String;h.stroke=h.fill="colour",n.prototype.equal=function(t,n){return e("snap.util.equal",this,t,n).firstDefined()},e.on("snap.util.equal",function(e,n){var i,d,p=f(this.attr(e)||""),g=this;if(p==+p&&n==+n)return{from:+p,to:+n,f:s};if("colour"==h[e])return i=t.color(p),d=t.color(n),{from:[i.r,i.g,i.b,i.opacity],to:[d.r,d.g,d.b,d.opacity],f:a};if("transform"==e||"gradientTransform"==e||"patternTransform"==e)return n instanceof t.Matrix&&(n=n.toTransformString()),t._.rgTransform.test(n)||(n=t._.svgTransform2string(n)),r(p,n,function(){return g.getBBox(1)});if("d"==e||"path"==e)return i=t.path.toCubic(p,n),{from:l(i[0]),to:l(i[1]),f:u(i[0])};if("points"==e)return i=f(p).split(t._.separator),d=f(n).split(t._.separator),{from:i,to:d,f:function(t){return t}};aUnit=p.match(c);var m=f(n).match(c);return aUnit&&aUnit==m?{from:parseFloat(p),to:parseFloat(n),f:o(aUnit)}:{from:this.asPX(e),to:this.asPX(e,n),f:s}})}),i.plugin(function(t,n,i,r){for(var s=n.prototype,o="hasOwnProperty",a=("createTouch"in r.doc),u=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],l={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},h=(function(t,e){var n="y"==t?"scrollTop":"scrollLeft",i=e&&e.node?e.node.ownerDocument:r.doc;return i[n in i.documentElement?"documentElement":"body"][n]}),c=function(){this.returnValue=!1},f=function(){return this.originalEvent.preventDefault()},d=function(){this.cancelBubble=!0},p=function(){return this.originalEvent.stopPropagation()},g=function(){return r.doc.addEventListener?function(t,e,n,i){var r=a&&l[e]?l[e]:e,s=function(r){var s=h("y",i),u=h("x",i);if(a&&l[o](e))for(var c=0,d=r.targetTouches&&r.targetTouches.length;d>c;c++)if(r.targetTouches[c].target==t||t.contains(r.targetTouches[c].target)){var g=r;r=r.targetTouches[c],r.originalEvent=g,r.preventDefault=f,r.stopPropagation=p;break}var m=r.clientX+u,y=r.clientY+s;return n.call(i,r,m,y)};return e!==r&&t.addEventListener(e,s,!1),t.addEventListener(r,s,!1),function(){return e!==r&&t.removeEventListener(e,s,!1),t.removeEventListener(r,s,!1),!0}}:r.doc.attachEvent?function(t,e,n,i){var r=function(t){t=t||i.node.ownerDocument.window.event;var e=h("y",i),r=h("x",i),s=t.clientX+r,o=t.clientY+e;return t.preventDefault=t.preventDefault||c,t.stopPropagation=t.stopPropagation||d,n.call(i,t,s,o)};t.attachEvent("on"+e,r);var s=function(){return t.detachEvent("on"+e,r),!0};return s}:void 0}(),m=[],y=function(t){for(var n,i=t.clientX,r=t.clientY,s=h("y"),o=h("x"),u=m.length;u--;){if(n=m[u],a){for(var l,c=t.touches&&t.touches.length;c--;)if(l=t.touches[c],l.identifier==n.el._drag.id||n.el.node.contains(l.target)){i=l.clientX,r=l.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();var f=n.el.node;f.nextSibling,f.parentNode,f.style.display,i+=o,r+=s,e("snap.drag.move."+n.el.id,n.move_scope||n.el,i-n.el._drag.x,r-n.el._drag.y,i,r,t)}},v=function(n){t.unmousemove(y).unmouseup(v);for(var i,r=m.length;r--;)i=m[r],i.el._drag={},e("snap.drag.end."+i.el.id,i.end_scope||i.start_scope||i.move_scope||i.el,n);m=[]},b=u.length;b--;)!function(e){t[e]=s[e]=function(n,i){return t.is(n,"function")&&(this.events=this.events||[],this.events.push({name:e,f:n,unbind:g(this.node||document,e,n,i||this)})),this},t["un"+e]=s["un"+e]=function(t){for(var n=this.events||[],i=n.length;i--;)if(n[i].name==e&&(n[i].f==t||!t))return n[i].unbind(),n.splice(i,1),!n.length&&delete this.events,this;return this}}(u[b]);s.hover=function(t,e,n,i){return this.mouseover(t,n).mouseout(e,i||n)},s.unhover=function(t,e){return this.unmouseover(t).unmouseout(e)};var x=[];s.drag=function(n,i,r,s,o,a){function u(u,l,h){(u.originalEvent||u).preventDefault(),this._drag.x=l,this._drag.y=h,this._drag.id=u.identifier,!m.length&&t.mousemove(y).mouseup(v),m.push({el:this,move_scope:s,start_scope:o,end_scope:a}),i&&e.on("snap.drag.start."+this.id,i),n&&e.on("snap.drag.move."+this.id,n),r&&e.on("snap.drag.end."+this.id,r),e("snap.drag.start."+this.id,o||s||this,l,h,u)}if(!arguments.length){var l;return this.drag(function(t,e){this.attr({transform:l+(l?"T":"t")+[t,e]})},function(){l=this.transform().local})}return this._drag={},x.push({el:this,start:u}),this.mousedown(u),this},s.undrag=function(){for(var n=x.length;n--;)x[n].el==this&&(this.unmousedown(x[n].start),x.splice(n,1),e.unbind("snap.drag.*."+this.id));return!x.length&&t.unmousemove(y).unmouseup(v),this}}),i.plugin(function(t,n,i){var r=(n.prototype,i.prototype),s=/^\s*url\((.+)\)/,o=String,a=t._.$;t.filter={},r.filter=function(e){var i=this;"svg"!=i.type&&(i=i.paper);var r=t.parse(o(e)),s=t._.id(),u=(i.node.offsetWidth,i.node.offsetHeight,a("filter"));return a(u,{id:s,filterUnits:"userSpaceOnUse"}),u.appendChild(r.node),i.defs.appendChild(u),new n(u)},e.on("snap.util.getattr.filter",function(){e.stop();var n=a(this.node,"filter");if(n){var i=o(n).match(s);return i&&t.select(i[1])}}),e.on("snap.util.attr.filter",function(i){if(i instanceof n&&"filter"==i.type){e.stop();var r=i.node.id;r||(a(i.node,{id:i.id}),r=i.id),a(this.node,{filter:t.url(r)})}i&&"none"!=i||(e.stop(),this.node.removeAttribute("filter"))}),t.filter.blur=function(e,n){null==e&&(e=2);var i=null==n?e:[e,n];return t.format('<feGaussianBlur stdDeviation="{def}"/>',{def:i})},t.filter.blur.toString=function(){return this()},t.filter.shadow=function(e,n,i,r,s){return"string"==typeof i&&(r=i,s=r,i=4),"string"!=typeof r&&(s=r,r="#000"),r=r||"#000",null==i&&(i=4),null==s&&(s=1),null==e&&(e=0,n=2),null==n&&(n=e),r=t.color(r),t.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:r,dx:e,dy:n,blur:i,opacity:s})},t.filter.shadow.toString=function(){return this()},t.filter.grayscale=function(e){return null==e&&(e=1),t.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-e),b:.7152-.7152*(1-e),c:.0722-.0722*(1-e),d:.2126-.2126*(1-e),e:.7152+.2848*(1-e),f:.0722-.0722*(1-e),g:.2126-.2126*(1-e),h:.0722+.9278*(1-e)})},t.filter.grayscale.toString=function(){return this()},t.filter.sepia=function(e){return null==e&&(e=1),t.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-e),b:.769-.769*(1-e),c:.189-.189*(1-e),d:.349-.349*(1-e),e:.686+.314*(1-e),f:.168-.168*(1-e),g:.272-.272*(1-e),h:.534-.534*(1-e),i:.131+.869*(1-e)})},t.filter.sepia.toString=function(){return this()},t.filter.saturate=function(e){return null==e&&(e=1),t.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-e})},t.filter.saturate.toString=function(){return this()},t.filter.hueRotate=function(e){return e=e||0,t.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:e})},t.filter.hueRotate.toString=function(){return this()},t.filter.invert=function(e){return null==e&&(e=1),t.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:e,amount2:1-e})},t.filter.invert.toString=function(){return this()},t.filter.brightness=function(e){return null==e&&(e=1),t.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:e})},t.filter.brightness.toString=function(){return this()},t.filter.contrast=function(e){return null==e&&(e=1),t.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:e,amount2:.5-e/2})},t.filter.contrast.toString=function(){return this()}}),i}),!function(t){"use strict";Gumby.touchDevice&&Gumby.touchEvents||!Gumby.autoInit?Gumby.touchEvents&&Gumby.touchDevice&&(Gumby.debug("Loading jQuery mobile touch events"),yepnope.errorTimeout=2e3,Modernizr.load({test:Modernizr.touch,yep:Gumby.touchEvents+"/jquery.mobile.custom.min.js",complete:function(){t.mobile||Gumby.error("Error loading jQuery mobile touch events"),Gumby.touchEventsLoaded=!0,Gumby.autoInit?window.Gumby.init():Gumby.uiModulesReady&&Gumby.helpers()}})):window.Gumby.init(),"function"==typeof define&&define.amd&&define(window.Gumby)}(jQuery);